{% if application['id'] is defined %}
    {% set applicationId = application['id'] %}
    {% set applicationName = application['name'] %}
    {% set applicationCategory = application['category'] %}
    {% set applicationRoute = application['route'] %}
    {% set applicationDescription = application['description'] %}
    {% set applicationDefaultComponent = application['default_component'] %}
    {% set applicationDefaultComponentDisabled = false %}
    {% set applicationDefaultErrorsComponent = application['default_errors_component'] %}
    {% set applicationDefaultErrorsComponentDisabled = false %}
    {% set applicationDefaultView = application['default_view'] %}
    {% set applicationDefaultViewDisabled = false %}
    {% set applicationDefaultEmailService = application['default_email_service'] %}
    {% if application['registration_allowed'] == true %}
        {% set registrationChecked = true %}
    {% else %}
        {% set registrationChecked = false %}
    {% endif %}
    {% set applicationRegistrationRoleId = application['registration_role_id'] %}
    {% set applicationGuestRoleId = application['guest_role_id'] %}
    {% set applicationCanLoginRoleIds = application['can_login_role_ids'] %}
{% else %}
    {% set applicationId = '' %}
    {% set applicationName = '' %}
    {% set applicationCategory = '' %}
    {% set applicationRoute = '' %}
    {% set applicationDescription = '' %}
    {% set applicationDefaultComponent = '' %}
    {% set applicationDefaultComponentDisabled = true %}
    {% set applicationDefaultErrorsComponent = '' %}
    {% set applicationDefaultErrorsComponentDisabled = true %}
    {% set applicationDefaultView = '' %}
    {% set applicationDefaultViewDisabled = true %}
    {% set applicationDefaultEmailService = '' %}
    {% set components = [] %}
    {% set views = [] %}
    {% set registrationChecked = '' %}
    {% set applicationRegistrationRoleId = '' %}
    {% set applicationGuestRoleId = '' %}
    {% set applicationCanLoginRoleIds = [] %}
{% endif %}
{% if applicationCategory === '0' %}
    {% set applicationCategoryDisabled = true %}
{% else %}
    {% set applicationCategoryDisabled = false %}
{% endif %}
<form data-validateon="section" id="{{componentId}}-{{sectionId}}-form">
    <fieldset id="{{componentId}}-{{sectionId}}-fieldset">
        <div class="row">
            <div class="col">
                <input class="token" type="hidden" name="{{security.getTokenKey()}}" value="{{security.getToken()}}" />
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'id',
                        'fieldLabel'                     : 'App ID',
                        'fieldType'                      : 'input',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'App ID',
                        'fieldRequired'                  : true,
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : false,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldHidden'                    : true,
                        'fieldDisabled'                  : true,
                        'fieldValue'                     : applicationId
                    ]
                )}}
            </div>
        </div>
        <div class="row">
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'name',
                        'fieldLabel'                     : 'App Name',
                        'fieldType'                      : 'input',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'App Name Example: Dashboard',
                        'fieldRequired'                  : true,
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldDataInputMinLength'        : 1,
                        'fieldDataInputMaxLength'        : 50,
                        'fieldValue'                     : applicationName
                    ]
                )}}
            </div>
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'route',
                        'fieldLabel'                     : 'App Route',
                        'fieldType'                      : 'input',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'App Route Example: mysite.com/dashboard/ "dashboard" is the route to access this app.',
                        'fieldRequired'                  : true,
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldDataInputMinLength'        : 1,
                        'fieldDataInputMaxLength'        : 50,
                        'fieldValue'                     : applicationRoute
                    ]
                )}}
            </div>
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'category',
                        'fieldLabel'                     : 'App Category',
                        'fieldType'                      : 'select2',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'App Category suggests which components can be installed on this application.',
                        'fieldRequired'                  : true,
                        'fieldDisabled'                  : applicationCategoryDisabled,
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldDataSelect2Options'        :
                            {
                                '1'            :
                                    {
                                        'id'            : '1',
                                        'name'          : 'Dashboard'
                                    },
                                '2'            :
                                    {
                                        'id'            : '2',
                                        'name'          : 'EShop'
                                    },
                                '3'            :
                                    {
                                        'id'            : '3',
                                        'name'          : 'PoS'
                                    }
                            },
                        'fieldDataSelect2OptionsKey'           : 'id',
                        'fieldDataSelect2OptionsValue'         : 'name',
                        'fieldDataSelect2OptionsArray'         : true,
                        'fieldDataSelect2OptionsSelected'      : applicationCategory
                    ]
                )}}
            </div>
        </div>
        <div class="row">
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'description',
                        'fieldLabel'                     : 'App Description',
                        'fieldType'                      : 'textarea',
                        'fieldDataMaxLength'             : 1024,
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Description of the application',
                        'fieldRequired'                  : false,
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldDataInputMaxLength'        : 1024,
                        'fieldTextareaRows'              : 2,
                        'fieldValue'                     : applicationDescription
                    ]
                )}}
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'default_component',
                        'fieldLabel'                     : 'Default Component',
                        'fieldType'                      : 'select2',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Select a default component for this application.',
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldRequired'                  : true,
                        'fieldDisabled'                  : applicationDefaultComponentDisabled,
                        'fieldDataSelect2Options'        : components,
                        'fieldDataSelect2OptionsKey'     : 'id',
                        'fieldDataSelect2OptionsValue'   : 'name',
                        'fieldDataSelect2OptionsArray'   : true,
                        'fieldDataSelect2OptionsSelected': applicationDefaultComponent
                    ]
                )}}
            </div>
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'default_errors_component',
                        'fieldLabel'                     : 'Default Error Component',
                        'fieldType'                      : 'select2',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Select a default error component for this application.',
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldRequired'                  : true,
                        'fieldDisabled'                  : applicationDefaultErrorsComponentDisabled,
                        'fieldDataSelect2Options'        : components,
                        'fieldDataSelect2OptionsKey'     : 'id',
                        'fieldDataSelect2OptionsValue'   : 'name',
                        'fieldDataSelect2OptionsArray'   : true,
                        'fieldDataSelect2OptionsSelected': applicationDefaultErrorsComponent
                    ]
                )}}
            </div>
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'default_view',
                        'fieldLabel'                     : 'Default View (Template)',
                        'fieldType'                      : 'select2',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Select a default view for this application.',
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldRequired'                  : true,
                        'fieldDisabled'                  : applicationDefaultViewDisabled,
                        'fieldDataSelect2Options'        : views,
                        'fieldDataSelect2OptionsKey'     : 'id',
                        'fieldDataSelect2OptionsValue'   : 'name',
                        'fieldDataSelect2OptionsArray'   : true,
                        'fieldDataSelect2OptionsSelected': applicationDefaultView
                    ]
                )}}
            </div>
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'default_email_service',
                        'fieldLabel'                     : 'Default Email Service',
                        'fieldType'                      : 'select2',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Select email service for this application. Email will be sent out using these service.',
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldRequired'                  : false,
                        'fieldDataSelect2Options'        : emailservices,
                        'fieldDataSelect2OptionsKey'     : 'id',
                        'fieldDataSelect2OptionsValue'   : 'name',
                        'fieldDataSelect2OptionsArray'   : true,
                        'fieldDataSelect2OptionsSelected': applicationDefaultEmailService
                    ]
                )}}
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'allowed-registration',
                        'fieldLabel'                     : 'Allow User Registration?',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Allow user registration on this app?',
                        'fieldRequired'                  : false,
                        'fieldType'                      : 'html',
                        'fieldAdditionalClass'           : 'mb-1',
                        'fieldBazScan'                   : false
                    ]
                )}}
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'registration_allowed',
                        'fieldLabel'                     : false,
                        'fieldType'                      : 'checkbox',
                        'fieldCheckboxType'              : 'success',
                        'fieldCheckboxChecked'           : registrationChecked,
                        'fieldCheckboxAdditionClass'     : 'text-sm text-uppercase',
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true
                    ]
                )}}
            </div>
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'registration_role_id',
                        'fieldLabel'                     : 'Registration Role',
                        'fieldType'                      : 'select2',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Select default role applied to a user after registration. Example: Customers Role.',
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldRequired'                  : true,
                        'fieldDisabled'                  : true,
                        'fieldDataSelect2Options'        : roles,
                        'fieldDataSelect2OptionsKey'     : 'id',
                        'fieldDataSelect2OptionsValue'   : 'name',
                        'fieldDataSelect2OptionsArray'   : true,
                        'fieldDataSelect2OptionsSelected': applicationRegistrationRoleId
                    ]
                )}}
            </div>
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'guest_role_id',
                        'fieldLabel'                     : 'Guest Role',
                        'fieldType'                      : 'select2',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Select default role applied to a guest users. Example: Guests Role.',
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldRequired'                  : true,
                        'fieldDisabled'                  : true,
                        'fieldDataSelect2Options'        : roles,
                        'fieldDataSelect2OptionsKey'     : 'id',
                        'fieldDataSelect2OptionsValue'   : 'name',
                        'fieldDataSelect2OptionsArray'   : true,
                        'fieldDataSelect2OptionsSelected': applicationGuestRoleId
                    ]
                )}}
            </div>
        </div>
        <div class="row">
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'can_login_role_ids',
                        'fieldLabel'                     : 'Allow Roles to login',
                        'fieldType'                      : 'select2',
                        'fieldSelect2Multiple'           : true,
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Select roles that can login into this app. Example: Customer Role, Sales Role.',
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldRequired'                  : false,
                        'fieldDisabled'                  : false,
                        'fieldDataSelect2Options'        : roles,
                        'fieldDataSelect2OptionsKey'     : 'id',
                        'fieldDataSelect2OptionsValue'   : 'name',
                        'fieldDataSelect2OptionsArray'   : true,
                        'fieldDataSelect2OptionsSelected': applicationCanLoginRoleIds
                    ]
                )}}
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'middlewares',
                        'fieldLabel'                     : 'Middlewares',
                        'fieldHelp'                      : true,
                        'fieldAdditionalClass'           : 'mb-1',
                        'fieldHelpTooltipContent'        : 'Middlewares are piece of software that are run before the main content.<br> Example: Auth Middleware. It makes sure that users are authenticated before they can access the main content.',
                        'fieldRequired'                  : false,
                        'fieldType'                      : 'html',
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldBazScan'                   : true
                    ]
                )}}
                {% if middlewares|length > 0 %}
                    {% for middleware in middlewares %}
                        {% set checkboxIds[componentId ~ '-' ~ sectionId ~ '-middleware-' ~ middleware['name']] = middleware['name'] %}
                        {% if middleware['enabled'] == 1 %}
                            {% set middlewareChecked = true %}
                        {% elseif middleware['enabled'] == 0 %}
                            {% set middlewareChecked = false %}
                        {% endif %}
                        {{adminltetags.useTag('fields',
                            [
                                'component'                      : component,
                                'componentName'                  : componentName,
                                'componentId'                    : componentId,
                                'sectionId'                      : sectionId,
                                'fieldId'                        : 'middleware-' ~ middleware['name'],
                                'fieldLabel'                     : false,
                                'fieldType'                      : 'checkbox',
                                'fieldCheckboxType'              : 'success',
                                'fieldCheckboxLabel'             : middleware['display_name'],
                                'fieldCheckboxChecked'           : middlewareChecked,
                                'fieldCheckboxAdditionClass'     : 'text-sm text-uppercase',
                                'fieldBazScan'                   : false,
                                'fieldDataAttributes'            :
                                [
                                    'middleware'    : middleware['id']
                                ]
                            ]
                        )}}
                    {% endfor %}
                    {% set checkboxIds = json_encode(checkboxIds, 16) %}
                {% else %}
                    <label>No middlewares installed for this application. Go to modules and install the middleware you need.</label>
                    {% set checkboxIds = json_encode([]) %}
                {% endif %}
            </div>
            <div class="col">
                {% if middlewares|length > 0 %}
                    <label>Middleware Sequence (Drag and drop to change sequence)</label>
                    <ul class="list-group" id="{{componentId}}-{{sectionId}}-sortable-middlewares">
                        {% for middleware in middlewares %}
                            {% if middleware['enabled'] == 1 %}
                                {% set disabled = '' %}
                                {% set area = 'false' %}
                            {% elseif middleware['enabled'] == 0 %}
                                {% set disabled = 'disabled' %}
                                {% set area = 'true' %}
                            {% endif %}
                            <li class="list-group-item list-group-item-secondary {{disabled}}" area-disabled="{{area}}" style="cursor: pointer" data-id="{{middleware['id']}}" data-middleware="{{componentId}}-{{sectionId}}-middleware-{{middleware['name']}}">
                                <i class="fa fa-sort fa-fw handle"></i> {{middleware['display_name']}}
                                <small class="form-text text-muted">{{middleware['description']}}</small>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
    </fieldset>
</form>
<script>
/* globals Sortable */
var dataCollectionComponent, dataCollectionSection, dataCollectionSectionForm;

if (!window['dataCollection']['{{componentId}}']) {
    dataCollectionComponent =
        window['dataCollection']['{{componentId}}'] = { };
} else {
    dataCollectionComponent =
        window['dataCollection']['{{componentId}}'];
}
if (!dataCollectionComponent['{{componentId}}-{{sectionId}}']) {
    dataCollectionSection =
        dataCollectionComponent['{{componentId}}-{{sectionId}}'] = { };
} else {
    dataCollectionSection =
        dataCollectionComponent['{{componentId}}-{{sectionId}}'];
}
if (!dataCollectionSection['{{componentId}}-{{sectionId}}-form']) {
    dataCollectionSectionForm =
        dataCollectionSection['{{componentId}}-{{sectionId}}-form'] = { };
} else {
    dataCollectionSectionForm =
        dataCollectionSection['{{componentId}}-{{sectionId}}-form'];
}

dataCollectionSection =
    $.extend(dataCollectionSection, {
        '{{componentId}}-{{sectionId}}-id'                              : { },
        '{{componentId}}-{{sectionId}}-name'                            : { },
        '{{componentId}}-{{sectionId}}-category'                        : {
            'placeholder'   : 'SELECT APP CATEGORY'
        },
        '{{componentId}}-{{sectionId}}-route'                           : { },
        '{{componentId}}-{{sectionId}}-description'                     : { },
        '{{componentId}}-{{sectionId}}-default_component'               : {
            'placeholder'   : 'SELECT DEFAULT COMPONENT'
        },
        '{{componentId}}-{{sectionId}}-default_errors_component'        : {
            'placeholder'   : 'SELECT DEFAULT ERRORS COMPONENT'
        },
        '{{componentId}}-{{sectionId}}-default_view'                    : {
            'placeholder'   : 'SELECT DEFAULT VIEW (TEMPLATE)'
        },
        '{{componentId}}-{{sectionId}}-default_email_service'           : {
            'placeholder'   : 'SELECT DEFAULT EMAIL SERVICE'
        },
        '{{componentId}}-{{sectionId}}-registration_allowed'            : { },
        '{{componentId}}-{{sectionId}}-registration_role_id'            : {
            'placeholder'   : 'SELECT REGISTRATION ROLE'
        },
        '{{componentId}}-{{sectionId}}-guest_role_id'                   : {
            'placeholder'   : 'SELECT GUEST ROLE'
        },
        '{{componentId}}-{{sectionId}}-can_login_role_ids'              : {
            'placeholder'   : 'SELECT ROLES'
        },
        '{{componentId}}-{{sectionId}}-middlewares'                     : {
            afterInit: function() {
                var checkboxIds = JSON.parse('{{checkboxIds}}');

                if (Object.keys(checkboxIds).length > 0) {
                    var el = document.getElementById("{{componentId}}-{{sectionId}}-sortable-middlewares");
                    var sortable = Sortable.create(el, {
                        onEnd: function() {
                            dataCollectionSection['data']['middlewares']['sequence'] = sortable.toArray();
                        }
                    });

                    dataCollectionSection['data']['middlewares'] = { };
                    dataCollectionSection['data']['middlewares']['middlewares'] = { };

                    for (var checkbox in checkboxIds) {
                        $('#' + checkbox).click(function() {
                            var id = $(this)[0].id;
                            extractCheckboxData(id, checkboxIds[checkbox])
                        });
                        extractCheckboxData(checkbox, checkboxIds[checkbox])
                    }
                }

                function extractCheckboxData(checkbox, middleware) {
                    dataCollectionSection['data']['middlewares']['sequence'] = sortable.toArray();

                    if ($('#' + checkbox)[0].checked === true) {

                        dataCollectionSection['data']['middlewares']['middlewares'][$('#' + checkbox).data('middleware')] = true;
                        $('#{{componentId}}-{{sectionId}}-sortable-middlewares').
                            find('[data-middleware="' + checkbox + '"]').removeClass('disabled').attr('area-disabled', 'false');
                    } else {
                        dataCollectionSection['data']['middlewares']['middlewares'][$('#' + checkbox).data('middleware')] = false;
                        $('#{{componentId}}-{{sectionId}}-sortable-middlewares').
                            find('[data-middleware="' + checkbox + '"]').addClass('disabled').attr('area-disabled', 'true');
                    }
                }
            }
        },
        '{{componentId}}-{{sectionId}}-form'                            : {
            rules: {
                '{{componentId}}-{{sectionId}}-name'                    : 'required',
                '{{componentId}}-{{sectionId}}-route'                   : 'required',
                '{{componentId}}-{{sectionId}}-category'                : 'required',
                '{{componentId}}-{{sectionId}}-registration_role_id'    : 'required',
                '{{componentId}}-{{sectionId}}-guest_role_id'           : 'required'
            },
            messages: {
                '{{componentId}}-{{sectionId}}-name'                    : 'Please enter app name',
                '{{componentId}}-{{sectionId}}-route'                   : 'Please enter app route',
                '{{componentId}}-{{sectionId}}-category'                : 'Please select app category',
                '{{componentId}}-{{sectionId}}-registration_role_id'    : 'Please select registration role',
                '{{componentId}}-{{sectionId}}-guest_role_id'           : 'Please select guest role'
            }
        }
    });
</script>