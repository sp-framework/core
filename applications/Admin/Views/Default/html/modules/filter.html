<div class="row">
	<div class="col">
		<div class="input-group mb-3">
			<div class="input-group-prepend">
				<label class="input-group-text" for="filter-select">
					<i class="fa fa-filter"></i>
				</label>
			</div>
			<select class="custom-select" id="filter-select">
				<option value="0" selected>Show All</option>
				{% for application in applications %}
					<option value="{{application['id']}}">Modules of application - {{application['display_name']}}</option>
				{% endfor %}
					<option value="installed">Installed</option>
					<option value="update_available">Upgradable</option>
			</select>
		</div>
	</div>
	<div class="col text-center">
		<div class="btn-group btn-group-toggle" data-toggle="buttons">
			<label class="btn text-primary btn-secondary disabled">
				<input type="checkbox" id="module-view-radio"><i class="fa fa-eye"></i>
			</label>
			<label class="btn btn-primary active">
				<input type="checkbox" id="module-core-radio" checked>Core
			</label>
			<label class="btn btn-primary active">
				<input type="checkbox" id="module-applications-radio" checked>Applications
			</label>
			<label class="btn btn-primary active">
				<input type="checkbox" id="module-components-radio" checked>Components
			</label>
			<label class="btn btn-primary active">
				<input type="checkbox" id="module-packages-radio" checked>Packages
			</label>
			<label class="btn btn-primary active">
				<input type="checkbox" id="module-middlewares-radio" checked>Middlewares
			</label>
			<label class="btn btn-primary active">
				<input type="checkbox" id="module-views-radio" checked>Views
			</label>
		</div>
	</div>
</div>

<script type="text/javascript">

	$('#filter-select').change(function() {
		$('#repo-loader').attr('hidden', false);

		var url = '/{{route}}/modules?filter=' + $('#filter-select option:selected').val() + '&layout=false';

		$('#modules-data').empty();
		$.get(url, function(data) {
				$('#repo-loader').attr('hidden', true);
				$('#modules-data').html(data);
				initModuleButtons();
			}
		);
	});

	$('#repositories-radio').click(function() {
		$('#repo-loader').attr('hidden', false);

		var url = '/{{route}}/modules?filter=0&layout=false';

		$('#modules-data').empty();
		$.get(url, function(data) {
				$('#repo-loader').attr('hidden', true);
				$('#modules-data').html(data);
				initModuleButtons();
			}
		);
	});

	$('#module-core-radio').click(function() {
		if ($(this)[0].checked === true) {
			$('#modules-data-core').attr('hidden', false);
			$(this).parents('label').removeClass('btn-secondary').addClass('btn-primary');
		} else {
			$('#modules-data-core').attr('hidden', true);
			$(this).parents('label').removeClass('btn-primary').addClass('btn-secondary');
		}
	});

	$('#module-applications-radio').click(function() {
		if ($(this)[0].checked === true) {
			$('#modules-data-applications').attr('hidden', false);
			$(this).parents('label').removeClass('btn-secondary').addClass('btn-primary');
		} else {
			$('#modules-data-applications').attr('hidden', true);
			$(this).parents('label').removeClass('btn-primary').addClass('btn-secondary');
		}
	});

	$('#module-components-radio').click(function() {
		if ($(this)[0].checked === true) {
			$('#modules-data-components').attr('hidden', false);
			$(this).parents('label').removeClass('btn-secondary').addClass('btn-primary');
		} else {
			$('#modules-data-components').attr('hidden', true);
			$(this).parents('label').removeClass('btn-primary').addClass('btn-secondary');
		}
	});

	$('#module-packages-radio').click(function() {
		if ($(this)[0].checked === true) {
			$('#modules-data-packages').attr('hidden', false);
			$(this).parents('label').removeClass('btn-secondary').addClass('btn-primary');
		} else {
			$('#modules-data-packages').attr('hidden', true);
			$(this).parents('label').removeClass('btn-primary').addClass('btn-secondary');
		}
	});

	$('#module-middlewares-radio').click(function() {
		if ($(this)[0].checked === true) {
			$('#modules-data-middlewares').attr('hidden', false);
			$(this).parents('label').removeClass('btn-secondary').addClass('btn-primary');
		} else {
			$('#modules-data-middlewares').attr('hidden', true);
			$(this).parents('label').removeClass('btn-primary').addClass('btn-secondary');
		}
	});

	$('#module-views-radio').click(function() {
		if ($(this)[0].checked === true) {
			$('#modules-data-views').attr('hidden', false);
			$(this).parents('label').removeClass('btn-secondary').addClass('btn-primary');
		} else {
			$('#modules-data-views').attr('hidden', true);
			$(this).parents('label').removeClass('btn-primary').addClass('btn-secondary');
		}
	});
</script>