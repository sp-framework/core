
{% if fieldType %}
    {# fieldId - field id is auto generated using componentId-fieldsetid-fieldid #}
    {% if fieldId %}
        {% set idChain = componentId ~ '-' %}
        {% set hasFieldId = 'id=' ~ idChain ~ fieldId %}
        {% set hasForId = idChain ~ fieldId %}
        {% set hasFieldName = 'name=' ~ idChain ~ fieldId %}
        {% set jstreeSearchId = 'id=' ~ idChain ~ fieldId ~ '-jstreesearch' %}
    {% else %}
        <span class="text-uppercase text-danger">{{('TEMPLATE ERROR: fieldId missing')}}</span>
    {% endif %}
    {# fieldLabel - field label fall between <label></label> and other places #}
    {% if not fieldLabel == false %}
        {% if fieldLabel %}
            {% set hasFieldLabel = '<label>' ~ fieldLabel ~ '</label>' %}
        {% else %}
            {% set hasFieldLabel = '<label>missing_fieldLabel</label>' %}
        {% endif %}
    {% elseif fieldLabel == false %}
        {% set hasFieldLabel = '' %}
    {% endif %}
    {# fieldPlaceholder - field placeholder, if false, then field label is used. #}
    {% if fieldPlaceholder %}
        {% set hasFieldPlaceholder = fieldPlaceholder %}
    {% else %}
        {% if fieldLabel %}
            {% set hasFieldPlaceholder = fieldLabel %}
        {% else %}
            {% set hasFieldPlaceholder = 'Missing_fieldPlaceholder_and_fieldLabel' %}
        {% endif %}
    {% endif %}
    {# fieldType - as per fieldType, code is generated, please see details in the file as to what fieldType generats what code #}
    {# fieldHelp - If field help is true, a question mark will appear on the right of field label, hover will have tooltip.
        Tooltip parameters:
            fieldHelpTooltipTitle : Title of tooltip || Tooltip Title (HTML Allowed)
            fieldHelpTooltipPosition : Position of tooltip || top
    #}
    {% if fieldHelp %}
        {% if not fieldHelpStyle %}
            {% set fieldHelpStyle = 'popover' %}
        {% endif %}
        {% if fieldHelpStyle == 'popover' %}
            {% set hasFieldHelp = '<a style="cursor: pointer;" tabindex="0" data-toggle="popover" data-html="true" data-trigger="focus" title="' ~ fieldLabel|upper ~ '" data-content="' ~ fieldHelpTooltipContent|default('missing_fieldHelpTooltipContent') ~ '" class="fa fa-fw fa-question-circle fa-1 helper"></a>' %}
        {% elseif fieldHelpStyle == 'tooltip' %}
            {% set hasFieldHelp = '<span><i data-toggle="tooltip" data-html="true" data-placement="' ~ fieldHelpTooltipPosition|default('auto') ~ '" title="' ~ fieldHelpTooltipContent|default('missing_fieldHelpTooltipContent') ~'" class="fa fa-fw fa-question-circle fa-1 helper"></i></span>' %}
        {% endif %}
    {% else %}
        {% set hasFieldHelp = '' %}
    {% endif %}
    {# fieldRequired - If field required is true, an exclamation mark will appear on the right of field label, hover will have tooltip.
        Tooltip parameters:
            fieldRequiredTooltipTitle : Title of tooltip || Field cannot be empty. (HTML Allowed)
            fieldRequiredTooltipPosition : Position of tooltip || top
    #}
    {% if fieldRequired %}
        {% set hasFieldRequired = '<span><sup><i data-toggle="tooltip" data-html="true" data-placement="' ~ fieldRequiredTooltipPosition|default('auto') ~ '" title="' ~ fieldRequiredTooltipTitle|default('Required') ~'" style="font-size: 7px;" class="fas fa-fw fa-star fa-1 helper text-danger"></i></sup></span>' %}
    {% else %}
        {% set hasFieldRequired = '' %}
    {% endif %}

    {# fieldBazScan:
        This is if you want BazContentFields.js to grab fields information and act on them. See BazContentFields.js documentation for more information as to what happens with certain field type.
    #}
    {% if fieldBazScan %}
        {% set hasFieldBazScan = 'data-bazScanType=' ~ fieldType %}
    {% else %}
        {% set hasFieldBazScan = '' %}
    {% endif %}
    {# fieldBazPost:
        This is if you want BazContentFields.js to grab fields information and act on them. See BazContentFields.js documentation for more information as to what happens with certain field type.
    #}
    {% if (fieldBazPostOnCreate) %}
        {% set hasFieldBazPostOnCreate = 'data-bazPostOnCreate=true' %}
    {% else %}
        {% set hasFieldBazPostOnCreate = '' %}
    {% endif %}
    {% if (fieldBazPostOnUpdate) %}
        {% set hasFieldBazPostOnUpdate = 'data-bazPostOnUpdate=true' %}
    {% else %}
        {% set hasFieldBazPostOnUpdate = '' %}
    {% endif %}

    {# If input field is 'numbers', min & max are used for validation. If input field is 'text'(default), min & max are used by maxLength to just show information.
        fieldDataMinNumber : the min value of numbers to be accepted.
        fieldDataMaxNumber : the max value of numbers to be accepted.
    #}
    {% if fieldDataMinNumber %}
        {% set hasFieldDataMinNumber = 'min=' ~ fieldDataMinNumber %}
    {% else %}
        {% set hasFieldDataMinNumber = '' %}
    {% endif %}
    {% if fieldDataMaxNumber %}
        {% set hasFieldDataMaxNumber = 'max=' ~ fieldDataMaxNumber %}
    {% else %}
        {% set hasFieldDataMaxNumber = '' %}
    {% endif %}
    {# If input field is Text or Numbers.
        fieldDataMaxLength : MinLength of allowed characters. This will also trigger maxLength() in BazContentFields.js
        fieldDataMaxLength : MaxLength of allowed characters. This will also trigger maxLength() in BazContentFields.js
    #}
    {% if fieldDataMinLength %}
        {% set hasFieldDataMinLength = 'minlength=' ~ fieldDataMinLength %}
    {% else %}
        {% set hasFieldDataMinLength = '' %}
    {% endif %}
    {% if fieldDataMaxLength %}
        {% set hasFieldDataMaxLength = 'maxlength=' ~ fieldDataMaxLength %}
    {% else %}
        {% set hasFieldDataMaxLength = '' %}
    {% endif %}
    {# If true, select 2 will have multiple attr #}
    {% if fieldSelect2Multiple %}
        {% set hasSelect2Multiple = 'multiple="multiple"' %}
    {% else %}
        {% set hasSelect2Multiple = '' %}
    {% endif %}

    {#  fieldCheckboxInline : If true, checkbox text will be inline with checkbox
        fieldCheckboxChecked : It true, check has checked attribute set to true
    #}
    {% if fieldCheckboxType %}
        {% set hasCheckboxType = fieldCheckboxType %}
    {% else %}
        {% set hasCheckboxType = 'primary' %}
    {% endif %}
    {% if fieldCheckboxInline %}
        {% set hasCheckboxInline = ' icheck-inline' %}
    {% else %}
        {% set hasCheckboxInline = '' %}
    {% endif %}
    {% if fieldCheckboxChecked %}
        {% set hasChecked = 'checked' %}
    {% else %}
        {% set hasChecked = '' %}
    {% endif %}

    {# fieldHidden - If true, field has class "hidden" #}
    {% if fieldHidden %}
        {% set hasFieldHidden = 'd-none' %}
    {% else %}
        {% set hasFieldHidden = '' %}
    {% endif %}
    {# fieldDisabled - If true, field has attribute disabled set to true #}
    {% if fieldDisabled %}
        {% set hasFieldDisabled = 'disabled' %}
    {% else %}
        {% set hasFieldDisabled = '' %}
    {% endif %}
    {# fieldGroupPreAddonDropdownButtonDisabled - If true, field has attribute disabled set to true #}
    {% if fieldGroupPreAddonDropdownButtonDisabled %}
        {% set hasFieldGroupPreAddonDropdownButtonDisabled = 'disabled' %}
    {% else %}
        {% set hasFieldGroupPreAddonDropdownButtonDisabled = '' %}
    {% endif %}
    {# fieldGroupPostAddonDropdownButtonDisabled - If true, field has attribute disabled set to true #}
    {% if fieldGroupPostAddonDropdownButtonDisabled %}
        {% set hasFieldGroupPostAddonDropdownButtonDisabled = 'disabled' %}
    {% else %}
        {% set hasFieldGroupPostAddonDropdownButtonDisabled = '' %}
    {% endif %}
    {# fieldGroupPreAddonButtonDisabled - If true, field has attribute disabled set to true #}
    {% if fieldGroupPreAddonButtonDisabled %}
        {% set hasFieldGroupPreAddonButtonDisabled = 'disabled' %}
    {% else %}
        {% set hasFieldGroupPreAddonButtonDisabled = '' %}
    {% endif %}
    {# fieldGroupPostAddonButtonDisabled - If true, field has attribute disabled set to true #}
    {% if fieldGroupPostAddonButtonDisabled %}
        {% set hasFieldGroupPostAddonButtonDisabled = 'disabled' %}
    {% else %}
        {% set hasFieldGroupPostAddonButtonDisabled = '' %}
    {% endif %}
    {# fieldFlatpickrPreAddonButtonDisabled - If true, field has attribute disabled set to true #}
    {% if fieldFlatpickrPreAddonButtonDisabled %}
        {% set hasFieldFlatpickrPreAddonButtonDisabled = 'disabled' %}
    {% else %}
        {% set hasFieldFlatpickrPreAddonButtonDisabled = '' %}
    {% endif %}
    {# fieldFlatpickrPostAddonButtonDisabled - If true, field has attribute disabled set to true #}
    {% if fieldFlatpickrPostAddonButtonDisabled %}
        {% set hasFieldFlatpickrPostAddonButtonDisabled = 'disabled' %}
    {% else %}
        {% set hasFieldFlatpickrPostAddonButtonDisabled = '' %}
    {% endif %}

    {# setup fieldInputTypeTextFilter #}
    {# available options:   int (only numbers can be negative),
                            positiveInt (only positive numbers),
                            positiveIntMax (only positive numbers, works with max="" html5 attribute),
                            float (float with unlimited numbers after the decimal),
                            positiveFloat,
                            positiveFloatMax,
                            percent (float with only 2 numbers after decimal),
                            positivePercent,
                            positivePercentMax,
                            currency (float or command (for Europe) with only 2 numbers after decimal),
                            positiveCurrency,
                            positiveCurrencyMax,
                            char (only alphabets),
                            hex (only hex values)
    #}
    {% if fieldInputTypeTextFilter %}
        {% set hasFieldInputTypeTextFilter = 'data-fieldinputfilter=' ~ fieldInputTypeTextFilter %}
    {% else %}
        {% set hasFieldInputTypeTextFilter = '' %}
    {% endif %}

    {% if fieldTextareaRows %}
        {% set hasFieldTextareaRows = 'rows=' ~ fieldTextareaRows %}
    {% else %}
        {% set hasFieldTextareaRows = 'rows=4' %}
    {% endif %}
    {% if fieldTextareaCols %}
        {% set hasFieldTextareaCols = 'cols=' ~ fieldTextareaCols %}
    {% else %}
        {% set hasFieldTextareaCols = '' %}
    {% endif %}

    {# Only used with contentType == sectionsGroup #}
    {% if fieldBazJstreeSearch %}
        <div {{jstreeSearchId}} jstree-search="{{fieldLabel|upper}}">
    {% endif %}

    {# LIST OF fieldTypes #}
        {# input #}
        {% if fieldType == 'input' %}
            <div class="form-group {{hasFieldHidden}}">
                {{hasFieldLabel|upper|raw}} {{hasFieldHelp|raw}} {{hasFieldRequired|raw}}
                {% if (fieldGroupPreAddonText) or (fieldGroupPreAddonIcon) or (fieldGroupPreAddonDropdown) or (fieldGroupPreAddonButtonId) or (fieldGroupPostAddonText) or (fieldGroupPostAddonIcon) or (fieldGroupPostAddonDropdown) or (fieldGroupPostAddonButtonId) %}
                    <div class="input-group input-group-{{fieldGroupSize|default('sm')}}">
                    {% set hasFieldSize = '' %}
                {% else %}
                    {% set hasFieldSize = 'form-control-' ~ fieldSize|default('sm') %}
                {% endif %}
                    {# PRE #}
                    {% if (fieldGroupPreAddonText) or (fieldGroupPreAddonIcon) or (fieldGroupPreAddonDropdown) or (fieldGroupPreAddonButtonId) %}
                        {% if fieldGroupPreAddonText %}
                            <div class="input-group-prepend">
                                <span class="input-group-text rounded-0">{{fieldGroupPreAddonText|raw}}</span>
                            </div>
                        {% elseif fieldGroupPreAddonIcon %}
                            <div class="input-group-prepend">
                                <span class="input-group-text rounded-0">
                                    <i class="fas fa-fw fa-{{fieldGroupPreAddonIcon}}"></i>
                                </span>
                            </div>
                        {% elseif fieldGroupPreAddonDropdown %}
                            <div class="input-group-prepend">
                                <button type="button" id="{{componentId}}-{{fieldId}}-prepend-dropdown-button" class="btn btn-{{fieldGroupPreAddonDropdownButtonClass|default('primary')}} dropdown-toggle rounded-0" data-toggle="dropdown" aria-expanded="false" {{hasFieldGroupPreAddonDropdownButtonDisabled}}>
                                    <span>{{fieldGroupPreAddonDropdownButtonTitle|default('MISSING BUTTON TITLE')}}</span>
                                </button>
                                <ul class="dropdown-menu">
                                    {% for title in fieldGroupPreAddonDropdownButtonListTitle %}
                                        {% if title == 'divider' %}
                                            <li class="dropdown-divider"></li>
                                        {% else %}
                                            <li class="dropdown-item">
                                                <a id="{{componentId}}-{{fieldId}}-{{title|lower}}" href="#">{{title}}</a>
                                            </li>
                                        {% endif %}
                                    {% endfor %}
                                </ul>
                            </div>
                        {% elseif (fieldGroupPreAddonButtonId) and (fieldGroupPreAddonButtonClass) and (fieldGroupPreAddonButtonValue) %}
                            <div class="input-group-prepend">
                                <button id="{{idChain}}{{fieldId}}-{{fieldGroupPreAddonButtonId}}" class="btn btn-{{fieldGroupPreAddonButtonClass|default('primary')}} rounded-0" type="button" data-toggle="tooltip" data-html="true" data-placement="{{fieldGroupPreAddonButtonTooltipPosition|default('right')}}" title="{{fieldGroupPreAddonButtonTooltipTitle}}" {{hasFieldGroupPreAddonButtonDisabled}}>
                                    {{fieldGroupPreAddonButtonValue|raw}}
                                </button>
                            </div>
                        {% endif %}
                    {% endif %}
                    {# INPUT #}
                    <input {{hasFieldBazPostOnCreate}} {{hasFieldBazPostOnUpdate}} {{hasFieldBazScan}} type="{{fieldInputType|default('text')}}" class="form-control {{hasFieldSize}} rounded-0" {{hasFieldId}} {{hasFieldName}} placeholder="{{hasFieldPlaceholder|upper}}" {{hasFieldDataMinNumber}} {{hasFieldDataMaxNumber}} {{hasFieldDataMinLength}} {{hasFieldDataMaxLength}} {{hasFieldDisabled}} {{hasFieldInputTypeTextFilter}} value="{{fieldValue}}" />
                    {# POST #}
                    {% if (fieldGroupPostAddonText) or (fieldGroupPostAddonIcon) or (fieldGroupPostAddonDropdown) or (fieldGroupPostAddonButtonId) %}
                        {% if fieldGroupPostAddonText %}
                            <div class="input-group-append">
                                <span class="input-group-text rounded-0">{{fieldGroupPostAddonText|raw}}</span>
                            </div>
                        {% elseif fieldGroupPostAddonIcon %}
                            <div class="input-group-append">
                                <span class="input-group-text rounded-0">
                                    <i class="fas fa-fw fa-{{fieldGroupPostAddonIcon}}"></i>
                                </span>
                            </div>
                        {% elseif fieldGroupPostAddonDropdown %}
                            <div class="input-group-append">
                                <button type="button" id="{{componentId}}-{{fieldId}}-append-dropdown-button" class="btn btn-{{fieldGroupPostAddonDropdownButtonClass|default('primary')}} dropdown-toggle rounded-0" data-toggle="dropdown" aria-expanded="false" {{hasFieldGroupPostAddonDropdownButtonDisabled}}>
                                    <span>{{fieldGroupPostAddonDropdownButtonTitle|default('MISSING BUTTON TITLE')}}</span>
                                </button>
                                <ul class="dropdown-menu dropdown-menu-right">
                                    {% for title in fieldGroupPostAddonDropdownButtonListTitle %}
                                        {% if title == 'divider' %}
                                            <li class="dropdown-divider"></li>
                                        {% else %}
                                            <li class="dropdown-item">
                                                <a id="{{componentId}}-{{fieldId}}-{{title|lower}}" href="#">{{title}}</a>
                                            </li>
                                        {% endif %}
                                    {% endfor %}
                                </ul>
                            </div>
                        {% elseif (fieldGroupPostAddonButtonId) and (fieldGroupPostAddonButtonClass) and (fieldGroupPostAddonButtonValue) %}
                            <div class="input-group-append">
                                <button id="{{idChain}}{{fieldId}}-{{fieldGroupPostAddonButtonId}}" class="btn btn-{{fieldGroupPostAddonButtonClass|default('primary')}} rounded-0" type="button" data-toggle="tooltip" data-html="true" data-placement="{{fieldGroupPostAddonButtonTooltipPosition|default('right')}}" title="{{fieldGroupPostAddonButtonTooltipTitle}}" {{hasFieldGroupPostAddonButtonDisabled}}>
                                    {{fieldGroupPostAddonButtonValue|raw}}
                                </button>
                            </div>
                        {% endif %}
                    {% endif %}
                {% if (fieldGroupPreAddonText) or (fieldGroupPreAddonIcon) or (fieldGroupPreAddonDropdown) or (fieldGroupPreAddonButtonId) or (fieldGroupPostAddonText) or (fieldGroupPostAddonIcon) or (fieldGroupPostAddonDropdown) or (fieldGroupPostAddonButtonId) %}
                    </div>
                {% endif %}
            </div>
        {# select2 #}
        {% elseif fieldType == 'select2' %}
            {# We process array for select to that is wrapped inside an array. List data received from sdk is wrapped inside array. But, if the data is received from component, it will not be wrapped. So, we need to check and re-wrap the component data into an array #}
            {% if fieldDataSelect2OptionsArray %}
                {% set fieldDataSelect2treeData = [fieldDataSelect2Options] %}
            {% else %}
                {% set fieldDataSelect2treeData = fieldDataSelect2Options %}
            {% endif %}
            <div class="form-group {{hasFieldHidden}}">
                {{hasFieldLabel|upper|raw}} {{hasFieldHelp|raw}} {{hasFieldRequired|raw}}
                <select {{hasFieldBazPostOnCreate}} {{hasFieldBazPostOnUpdate}} {{hasFieldBazScan}} class="form-control select2 select2-{{fieldSelect2Type|default('primary')}}" data-dropdown-css-class="select2-{{fieldSelect2Type|default('primary')}}" {{hasFieldId}} {{hasFieldName}} style="width:100%;" {{hasSelect2Multiple}} {{hasFieldDisabled}}>
                <option></option>
                {% if fieldDataSelect2Options %}
                    {{include('thelpers/tree/treeview.html', {
                        treeMode : 'select2',
                        treeData : fieldDataSelect2treeData
                        }
                    )}}
                {% endif %}
                </select>
            </div>
        {# Checkbox #}
        {% elseif fieldType == 'checkbox' %}
            {% if not fieldCheckboxLabel %}
                {% set fieldCheckboxLabel = ' ' %}
                {% set showFieldCheckboxLabelHelpAndRequired = false %}
            {% else %}
                {% set showFieldCheckboxLabelHelpAndRequired = true %}
            {% endif %}
            <div {{hasFieldHidden}}>
                {% if fieldLabel %}
                    {{hasFieldLabel|upper|raw}} {{hasFieldHelp|raw}} {{hasFieldRequired|raw}}
                {% endif %}
                <div class="icheck-{{hasCheckboxType}}{{hasCheckboxInline}}">
                    <input {{hasFieldBazPostOnCreate}} {{hasFieldBazPostOnUpdate}} {{hasFieldBazScan}} type="checkbox" {{hasFieldName}} {{hasFieldId}} {{hasFieldDisabled}} {{hasChecked}} />
                    <label for="{{hasForId}}">{{fieldCheckboxLabel|upper}}</label>
                    {% if showFieldCheckboxLabelHelpAndRequired %}
                        <span>{{hasFieldHelp|raw}} {{hasFieldRequired|raw}}</span>
                    {% endif %}
                </div>
            </div>
        {# Radio #}
        {% elseif fieldType == 'radio' %}
            <div class="form-group {{hasFieldHidden}}">
                <div {{hasFieldBazPostOnCreate}} {{hasFieldBazPostOnUpdate}} {{hasFieldBazScan}} {{hasFieldId}}>
                    {{hasFieldLabel|upper|raw}} {{hasFieldHelp|raw}} {{hasFieldRequired|raw}}
                    {% if not fieldRadioPlacementType or fieldRadioPlacementType == 'vertical' %}
                        {% set col = 12 %}
                    {% elseif fieldRadioPlacementType == 'horizontal' %}
                        {% set col = 12/fieldRadioButtons|length %}
                        <div class="row vdivide">
                    {% endif %}
                    {% for radioButtonKey, radioButton in fieldRadioButtons %}
                        {% if radioButton.dataValue == fieldRadioChecked %}
                            {% set hasRadioChecked = 'checked' %}
                        {% endif %}
                        {% if fieldRadioPlacementType == 'horizontal' %}
                            {% if col == 12 %}
                                <div class="col-md-12">
                            {% else %}
                                <div class="col-md-{{col}}">
                            {% endif %}
                        {% endif %}
                                <div class="icheck-{{radioButton.type}}">
                                    <input type="radio" id="{{radioButtonKey}}" data-value="{{radioButton.dataValue}}" {{hasFieldName}} {{hasRadioChecked}}>
                                    {% if radioButton.iconPosition == 'before' %}
                                        <label for="{{radioButtonKey}}"><i class="{{radioButton.icon}}"></i><span class="ml-1">{{radioButton.title}}</span></label>
                                    {% elseif radioButton.iconPosition == 'after' %}
                                        <label for="{{radioButtonKey}}"><span class="mr-1">{{radioButton.title}}</span><i class="{{radioButton.icon}}"></i></label>
                                    {% endif %}
                                </div>
                        {% if fieldRadioPlacementType == 'horizontal' %}
                            {% if col == 12 %}
                                </div>
                            {% else %}
                                </div>
                            {% endif %}
                        {% endif %}
                        {% set hasRadioChecked = '' %}
                    {% endfor %}
                    {% if fieldRadioPlacementType == 'horizontal' %}
                        </div>
                    {% endif %}
                </div>
            </div>
        {# Radio Button Group #}
        {% elseif fieldType == 'radio-button-group' %}
            <div class="form-group" {{hasFieldBazPostOnCreate}} {{hasFieldBazPostOnUpdate}} {{hasFieldBazScan}} {{hasFieldId}} {{hasFieldHidden}}>
                {{hasFieldLabel|upper|raw}} {{hasFieldHelp|raw}} {{hasFieldRequired|raw}}
                <br>
                {{include('thelpers/buttons.html', {
                    buttonType                              : 'button-radio-group',
                    buttonBlock                             : fieldRadioButtonGroupBlock,
                    buttonPosition                          : fieldRadioButtonGroupPosition,
                    buttons                                 : fieldRadiobuttonGroupButtons,
                    buttonChecked                           : fieldRadioButtonGroupButtonChecked
                })}}
            </div>
        {# flatpickr (date) fieldFlatpickrMode - single, multiple, range #}
        {% elseif fieldType == 'flatpickr' %}
            <div class="form-group {{hasFieldHidden}}">
                {{hasFieldLabel|upper|raw}} {{hasFieldHelp|raw}} {{hasFieldRequired|raw}}
                <div class="input-group input-group-{{hasfieldGroupSize|default('sm')}} flatpickr" data-id="strap" data-flatpickr-mode="{{fieldFlatpickrMode|default('single')}}">
                {% if fieldFlatpickrPreAddonText %}
                    <div class="input-group-prepend">
                        <span class="input-group-text rounded-0">{{fieldFlatpickrPreAddonText|raw}}</span>
                    </div>
                {% elseif fieldFlatpickrPreAddonIcon %}
                    <div class="input-group-prepend">
                        <span class="input-group-text rounded-0">
                            <i class="fas fa-fw fa-{{fieldFlatpickrPreAddonIcon}}"></i>
                        </span>
                    </div>
                {% elseif (fieldFlatpickrPreAddonButtonId) and (fieldFlatpickrPreAddonButtonClass) and (fieldFlatpickrPreAddonButtonValue) %}
                    <div class="input-group-prepend">
                        <button id="{{idChain}}{{fieldId}}-{{fieldFlatpickrPreAddonButtonId}}" class="btn btn-{{hasfieldGroupSize|default('sm')}} btn-{{fieldFlatpickrPreAddonButtonClass|default('info')}} rounded-0" type="button" data-toggle="tooltip" data-html="true" data-placement="{{fieldFlatpickrPreAddonButtonTooltipPosition|default('top')}}" title="{{fieldFlatpickrPreAddonButtonTooltipTitle}}" {{hasFieldFlatpickrPreAddonButtonDisabled}}>
                            {{fieldFlatpickrPreAddonButtonValue|raw}}
                        </button>
                    </div>
                {% endif %}
                    <input type="text" class="form-control rounded-0" placeholder="{{hasFieldPlaceholder|upper}}" {{hasFieldBazPostOnCreate}} {{hasFieldBazPostOnUpdate}} {{hasFieldBazScan}} {{hasFieldId}} {{hasFieldDisabled}} value="{{fieldValue}}" data-input/>
                {% if fieldFlatpickrPostAddonText %}
                    <div class="input-group-append">
                        <span class="input-group-text rounded-0">{{fieldFlatpickrPostAddonText|raw}}</span>
                    </div>
                {% elseif fieldFlatpickrPostAddonIcon %}
                    <div class="input-group-append">
                        <span class="input-group-text rounded-0">
                            <i class="fas fa-fw fa-{{fieldFlatpickrPostAddonIcon}}"></i>
                        </span>
                    </div>
                {% elseif (fieldFlatpickrPostAddonButtonId) and (fieldFlatpickrPostAddonButtonClass) and (fieldFlatpickrPostAddonButtonValue) %}
                    <div class="input-group-append">
                        <button id="{{idChain}}{{fieldId}}-{{fieldFlatpickrPostAddonButtonId}}" class="btn btn-{{hasfieldGroupSize|default('sm')}} btn-{{fieldFlatpickrPostAddonButtonClass|default('info')}} rounded-0" type="button" data-toggle="tooltip" data-html="true" data-placement="{{fieldFlatpickrPostAddonButtonTooltipPosition|default('top')}}" title="{{fieldFlatpickrPostAddonButtonTooltipTitle}}" {{hasFieldFlatpickrPostAddonButtonDisabled}}>
                            {{fieldFlatpickrPostAddonButtonValue|raw}}
                        </button>
                    </div>
                {% elseif not fieldFlatpickrPostAddonText or fieldFlatpickrPostAddonIcon or fieldFlatpickrPostAddonButtonId %}
                    <div class="input-group-append">
                        <span class="input-group-text rounded-0">
                            <i class="fas fa-fw fa-calendar-alt"></i>
                        </span>
                    </div>
                {% endif %}
                {% if fieldFlatpickrClearButton %}
                    <div class="input-group-append">
                        <button id="{{idChain}}{{fieldId}}-clear" class="btn btn-{{hasfieldGroupSize|default('sm')}} btn-{{fieldFlatpickrClearButtonClass|default('danger')}} rounded-0" type="button" data-toggle="tooltip" data-html="true" data-placement="{{fieldFlatpickrClearAddonButtonTooltipPosition|default('top')}}" {{fieldFlatpickrClearButtonDisabled}}><i class="fas fa-fw fa-eraser"></i>
                        </button>
                    </div>
                {% endif %}
                </div>
            </div>
        {# textarea #}
        {% elseif fieldType == 'textarea' %}
            <div class="form-group {{hasFieldHidden}}">
                {{hasFieldLabel|upper|raw}} {{hasFieldHelp|raw}} {{hasFieldRequired|raw}}
                <textarea {{hasFieldBazPostOnCreate}} {{hasFieldBazPostOnUpdate}} {{hasFieldBazScan}} class="form-control rounded-0" {{hasFieldId}} placeholder="{{hasFieldPlaceholder|upper}}" {{hasFieldDisabled}} value="{{fieldValue}}" {{hasFieldTextareaRows}} {{hasFieldTextareaCols}}></textarea>
            </div>
        {# trumbowyg #}
        {% elseif fieldType == 'trumbowyg' %}
            {{include('thelpers/fields/trumbowyg-icons.html')}}
            <div class="form-group {{hasFieldHidden}}">
                {{hasFieldLabel|upper|raw}} {{hasFieldHelp|raw}} {{hasFieldRequired|raw}}
                <textarea placeholder="{{hasFieldPlaceholder|upper}}" class="form-control" {{hasFieldBazPostOnCreate}} {{hasFieldBazPostOnUpdate}} {{hasFieldBazScan}} {{hasFieldId}}>{{fieldValue}}</textarea>
            </div>
        {# counters #}
        {% elseif fieldType == 'counters' %}
            {% if not countersPlacementType or countersPlacementType == 'vertical' %}
                {% set col = 12 %}
            {% elseif countersPlacementType == 'horizontal' %}
                {% if counters|length > 4 %}
                    {% set col = 3 %}
                {% elseif counters|length <= 4 %}
                    {% set col = 12/counters|length %}
                {% endif %}
                {% set isHorizontal = 'vdivide' %}
            {% endif %}
            {% if fieldLabel %}
                {{hasFieldLabel|upper|raw}} {{hasFieldHelp|raw}}
            {% endif %}
            <div {{hasFieldBazPostOnCreate}} {{hasFieldBazPostOnUpdate}} {{hasFieldBazScan}} {{hasFieldId}} class="row {{isHorizontal}} {{hasFieldHidden}}">
                {% for counter in counters %}
                    {% if counter.value %}
                        {% set counterValue = counter.value %}
                        {% set hasDataValue = 'data-value="' ~ counter.value ~ '"'%}
                    {% else %}
                        {% set counterValue = 0 %}
                    {% endif %}
                    {% if counter.type %}
                        {% set hasType = counter.type %}
                    {% else %}
                        {% set hasType = 'primary' %}
                    {% endif %}
                    {% if col == 12 %}
                        <div id="{{counter.id}}" {{hasDataValue}} class="col-md-12 pt-1">
                    {% else %}
                        <div id="{{counter.id}}" {{hasDataValue}} class="col-md-{{col}} pt-1">
                    {% endif %}
                        <div class="row">
                            <div class="col-md-11">
                                <label>{{counter.title|raw}}</label>
                            </div>
                            <div class="col-md-1">
                                <span class="badge badge-{{hasType|default('primary')}} float-right mt-1">{{counterValue}}</span>
                            </div>
                        </div>
                    {% if col == 12 %}
                        </div>
                    {% else %}
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        {# jstree #}
        {% elseif fieldType == 'jstree' %}
            <div class="form-group m-0 {{hasFieldHidden}}">
                {{hasFieldLabel|upper|raw}} {{hasFieldHelp|raw}} {{hasFieldRequired|raw}}
                <input type="text" class="form-control form-control-sm jstreevalidate rounded-0" id="{{idChain}}{{fieldId}}-validate" name="{{idChain}}{{fieldId}}-tree-validate" placeholder="{{hasFieldPlaceholder|upper}}" hidden />
                <div id="{{idChain}}{{fieldId}}-tree-tools" class="mb-2 float-right">
                    <a href="#" id="{{idChain}}{{fieldId}}-tools-add" class="text-primary" data-container="body" data-placement="left" data-toggle="tooltip" data-html="true" title="Add new {{fieldId}}" hidden>
                        <i class="fas fa-fw fa-plus"></i>
                    </a>
                    <a href="#" id="{{idChain}}{{fieldId}}-tools-edit" class="text-primary ml-1" data-container="body" data-placement="left" data-toggle="tooltip" data-html="true" title="Edit selected {{fieldId}}" hidden>
                        <i class="fas fa-fw fa-edit"></i>
                    </a>
                    <a href="#" id="{{idChain}}{{fieldId}}-tools-collapse" class="text-primary ml-1" data-container="body" data-placement="left" data-toggle="tooltip" data-html="true" title="Collapse All" hidden>
                        <i class="fas fa-fw fa-compress-arrows-alt"></i>
                    </a>
                    <a href="#" id="{{idChain}}{{fieldId}}-tools-expand" class="text-primary ml-1" data-container="body" data-placement="left" data-toggle="tooltip" data-html="true" title="Expand All" hidden>
                        <i class="fas fa-fw fa-expand-arrows-alt"></i>
                    </a>
                </div>
                {{include('thelpers/fields/fields.html', {
                            originalFieldId                         : fieldId,
                            fieldId                                 : originalFieldId ~ fieldId ~ '-tree-search-input',
                            fieldLabel                              : ' ',
                            fieldType                               : 'input',
                            fieldHelp                               : false,
                            fieldGroupSize                          : 'sm',
                            fieldRequired                           : false,
                            fieldBazScan                            : false,
                            fieldHidden                             : true,
                            fieldPlaceholder                        : 'Search ' ~ fieldId ~ '...',
                            fieldGroupPostAddonIcon                 : 'search'
                        }
                )}}
                {{include('thelpers/fields/fields.html', {
                            originalFieldId                          : fieldId,
                            fieldId                                  : originalFieldId ~ fieldId ~ '-tree-add-input',
                            fieldLabel                               : ' ',
                            fieldType                                : 'input',
                            fieldHelp                                : false,
                            fieldGroupSize                           : 'sm',
                            fieldRequired                            : false,
                            fieldPlaceholder                         : 'Add...',
                            fieldBazScan                             : false,
                            fieldHidden                              : true,
                            fieldGroupPreAddonButtonId               : originalFieldId ~ 'cancel',
                            fieldGroupPreAddonButtonValue            : '<i class="fas fa-fw fa-times"></i>',
                            fieldGroupPreAddonButtonClass            : 'danger',
                            fieldGroupPostAddonButtonId              : originalFieldId ~ 'success',
                            fieldGroupPostAddonButtonValue           : '<i class="fas fa-fw fa-plus"></i>',
                            fieldGroupPostAddonButtonClass           : 'success',
                        }
                )}}
                {{include('thelpers/fields/fields.html', {
                            originalFieldId                          : fieldId,
                            fieldId                                  : originalFieldId ~ fieldId ~ '-tree-edit-input',
                            fieldLabel                               : ' ',
                            fieldType                                : 'input',
                            fieldHelp                                : false,
                            fieldGroupSize                           : 'sm',
                            fieldRequired                            : false,
                            fieldPlaceholder                         : 'Add...',
                            fieldBazScan                             : false,
                            fieldHidden                              : true,
                            fieldGroupPreAddonButtonId               : originalFieldId ~ 'cancel',
                            fieldGroupPreAddonButtonValue            : '<i class="fas fa-fw fa-times"></i>',
                            fieldGroupPreAddonButtonClass            : 'danger',
                            fieldGroupPostAddonButtonId              : originalFieldId ~ 'success',
                            fieldGroupPostAddonButtonValue           : '<i class="fas fa-fw fa-plus"></i>',
                            fieldGroupPostAddonButtonClass           : 'success',
                        }
                )}}
                <div class="height-control-200 p-1 border mt-1" id="{{idChain}}{{fieldId}}-tree-div">
                    <div {{hasFieldBazPostOnCreate}} {{hasFieldBazPostOnUpdate}} {{hasFieldBazScan}} id="{{idChain}}{{fieldId}}">
                        {% if fieldJstreeIncludeRootInPath %}
                        <ul>
                        {% endif %}
                            {% for dataArrKey, dataArr in dataSrcArr %}
                                {% if fieldJstreeIncludeRootInPath %}
                                <li data-id="0" data-jstree="{{dataArr['rootIcon']}}">{{dataArrKey}}
                                {% endif %}
                                    <ul>
                                    {{include('thelpers/tree/treeview.html', {
                                        treeMode                : 'jstree',
                                        treeData                : dataArr.srcArr,
                                        groupIcon               : dataArr.groupIcon,
                                        itemIcon                : dataArr.itemIcon
                                        }
                                    )}}
                                    </ul>
                                {% if fieldJstreeIncludeRootInPath %}
                                </li>
                                {% endif %}
                            {% endfor %}
                        {% if fieldJstreeIncludeRootInPath %}
                        </ul>
                        {% endif %}
                    </div>
                </div>
            </div>
            <script>
if (!window['bazDataCollection']['{{componentId}}']) {
    window['bazDataCollection']['{{componentId}}'] = { };
}
window['bazDataCollection']['{{componentId}}']['{{componentId}}-{{sectionId}}'] = $.extend(window['bazDataCollection']['{{componentId}}']['{{componentId}}-{{sectionId}}'], {
    '{{componentId}}-{{fieldId}}' : {
        'bazJstreeOptions': {
            'rootIcon': 'fa fa-folder-open-o',
            'treeName': '{{fieldLabel|capitalize}}',
            'treePathSeparator': ' <i class="fa fa-angle-right text-sm"></i> ',
            'add': '{{fieldJstreeAdd|default(false)}}',
            'addFunction': function() {
                'use strict';
            },
            'edit': '{{fieldJstreeEdit|default(false)}}',
            'editFunction': function() {
                'use strict';
            },
            'search' : '{{fieldJstreeSearch}}',
            'expand': '{{fieldJstreeExpand|default(false)}}',
            'collapse': '{{fieldJstreeCollapse|default(false)}}',
            'firstOpen': '{{fieldJstreeFirstOpen|default(false)}}',
            'allOpen' : '{{fieldJstreeAllOpen|default(false)}}',
            'toggleAllChildren': '{{fieldJstreeToggleAllChildren|default(false)}}',
            'inclRoot': '{{fieldJstreeIncludeRootInPath|default(false)}}',
            'selectEndNodeOnly': '{{fieldJstreeSelectEndNodeOnly|default(false)}}',
            'hideJstreeIcon': '{{fieldJstreeHideJstreeIcons|default(false)}}'
        },
        'core': {
            'themes': {
                'name': '{{fieldJstreeTheme|default("default")}}',
                'dots': '{{fieldJstreeShowDots|default(false)}}'
            },
            'dblclick_toggle': '{{fieldJstreeDoubleClickToggle|default(false)}}',
            'check_callback': true,
            'multiple': '{{fieldJstreeMultiple|default(false)}}',
        },
        'plugins': ["search", "types", "dnd"],
        'search': {
            'show_only_matches': '{{fieldJstreeSearchShowOnlyMatches|default(false)}}',
            'show_only_matches_children': '{{fieldJstreeSearchShowOnlyMatchesChildren|default(false)}}',
            'case_sensitive' : '{{fieldJstreeSearchCaseSensitive|default(false)}}'
        }
    }
});
</script>
        {# HTML Content #}
        {% elseif fieldType == 'html' %}
            <div {{hasFieldId}} class="{{hasFieldHidden}}">
                {{hasFieldLabel|upper|raw}} {{hasFieldHelp|raw}} {{hasFieldRequired|raw}}
                {{fieldHTMLContent|raw}}
            </div>
        {# Dropzone #}
        {% elseif fieldType == 'dropzone' %}
            <div class="{{hasFieldHidden}}">
                {{hasFieldLabel|upper|raw}} {{hasFieldHelp|raw}} {{hasFieldRequired|raw}}
                <div {{hasFieldBazScan}} {{hasFieldId}} class="dropzone-custom border" style="background-color: rgba(0, 0, 0, 0.05);"></div>
            </div>
        {# Datatable #}
        {% elseif fieldType == 'datatable' %}
        {% endif %}
    {% if fieldBazJstreeSearch %}
        </div>
    {% endif %}
{% else %}
    <span class="text-uppercase text-danger">{{('TEMPLATE ERROR: fieldType missing')}}</span>
{% endif %}
