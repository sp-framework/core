{% if streetFieldLabel is not defined %}
    {% set streetFieldLabel = 'Street Address' %}
{% endif %}
{% if street2FieldLabel is not defined %}
    {% set street2FieldLabel = 'Street Address 2' %}
{% endif %}
{% if street2FieldRequired is not defined %}
    {% set street2FieldRequired = false %}
{% endif %}
{% if cityFieldLabel is not defined %}
    {% set cityFieldLabel = 'City' %}
{% endif %}
{% if postCodeFieldLabel is not defined %}
    {% set postCodeFieldLabel = 'Post Code' %}
{% endif %}
{% if stateFieldLabel is not defined %}
    {% set stateFieldLabel = 'State' %}
{% endif %}
{% if countryFieldLabel is not defined %}
    {% set countryFieldLabel = 'Country' %}
{% endif %}

{% if includeStreet is defined %}
    <div class="row">
        <div class="col">
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'street_address',
                    'fieldLabel'                            : streetFieldLabel,
                    'fieldType'                             : 'input',
                    'fieldHelp'                             : true,
                    'fieldHelpTooltipContent'               : 'Street Address',
                    'fieldRequired'                         : true,
                    'fieldBazScan'                          : true,
                    'fieldBazPostOnCreate'                  : streetAddressFieldBazPostOnCreate,
                    'fieldBazPostOnUpdate'                  : streetAddressFieldBazPostOnUpdate,
                    'fieldDataInputMinLength'               : 1,
                    'fieldDataInputMaxLength'               : 100,
                    'fieldValue'                            : streetAddress
                ]
            )}}
        </div>
        <div class="col">
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'street_address_2',
                    'fieldLabel'                            : street2FieldLabel,
                    'fieldType'                             : 'input',
                    'fieldHelp'                             : true,
                    'fieldHelpTooltipContent'               : 'Additional street address',
                    'fieldRequired'                         : street2FieldRequired,
                    'fieldBazScan'                          : true,
                    'fieldBazPostOnCreate'                  : streetAddress2FieldBazPostOnCreate,
                    'fieldBazPostOnUpdate'                  : streetAddress2FieldBazPostOnUpdate,
                    'fieldDataInputMinLength'               : 1,
                    'fieldDataInputMaxLength'               : 100,
                    'fieldValue'                            : streetAddress2
                ]
            )}}
        </div>
    </div>
{% endif %}

{% if searchType == 'city' %}
    <div class="row">
        <div class="col">
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'city_id',
                    'fieldLabel'                            : cityFieldLabel,
                    'fieldHidden'                           : true,
                    'fieldType'                             : 'input',
                    'fieldBazScan'                          : true,
                    'fieldBazPostOnCreate'                  : cityFieldBazPostOnCreate,
                    'fieldBazPostOnUpdate'                  : cityFieldBazPostOnUpdate,
                    'fieldValue'                            : cityId
                ]
            )}}
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'city_name',
                    'fieldLabel'                            : cityFieldLabel,
                    'fieldType'                             : 'input',
                    'fieldPlaceholder'                      : 'Search City',
                    'fieldHelp'                             : true,
                    'fieldHelpTooltipContent'               : 'Search ' ~ cityFieldLabel ~ '. If there are no search results, try fixing the spelling or use full form for the name, ex: use Saint instead of St.',
                    'fieldBazScan'                          : true,
                    'fieldBazPostOnCreate'                  : cityFieldBazPostOnCreate,
                    'fieldBazPostOnUpdate'                  : cityFieldBazPostOnUpdate,
                    'fieldRequired'                         : true,
                    'fieldDataInputMinLength'               : 1,
                    'fieldDataInputMaxLength'               : 100,
                    'fieldValue'                            : cityName
                ]
            )}}
        </div>
        <div class="col">
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'post_code',
                    'fieldLabel'                            : postCodeFieldLabel,
                    'fieldType'                             : 'input',
                    'fieldHelp'                             : true,
                    'fieldHelpTooltipContent'               : postCodeFieldLabel ~ ' of the address.',
                    'fieldRequired'                         : true,
                    'fieldBazScan'                          : true,
                    'fieldBazPostOnCreate'                  : postCodeFieldBazPostOnCreate,
                    'fieldBazPostOnUpdate'                  : postCodeFieldBazPostOnUpdate,
                    'fieldDataInputMinLength'               : 1,
                    'fieldDataInputMaxLength'               : 50,
                    'fieldValue'                            : postCode
                ]
            )}}
        </div>
    </div>
    <div class="row">
        <div class="col">
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'state_id',
                    'fieldLabel'                            : cityFieldLabel,
                    'fieldHidden'                           : true,
                    'fieldType'                             : 'input',
                    'fieldBazScan'                          : true,
                    'fieldBazPostOnCreate'                  : stateFieldBazPostOnCreate,
                    'fieldBazPostOnUpdate'                  : stateFieldBazPostOnUpdate,
                    'fieldValue'                            : stateId
                ]
            )}}
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'state_name',
                    'fieldPlaceholder'                      : 'Search State',
                    'fieldLabel'                            : stateFieldLabel,
                    'fieldType'                             : 'input',
                    'fieldHelp'                             : true,
                    'fieldHelpTooltipContent'               : 'Enter ' ~ stateFieldLabel,
                    'fieldBazScan'                          : true,
                    'fieldBazPostOnCreate'                  : stateFieldBazPostOnCreate,
                    'fieldBazPostOnUpdate'                  : stateFieldBazPostOnUpdate,
                    'fieldRequired'                         : true,
                    'fieldDataInputMinLength'               : 1,
                    'fieldDataInputMaxLength'               : 100,
                    'fieldValue'                            : stateName
                ]
            )}}
        </div>
        <div class="col">
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'country_id',
                    'fieldLabel'                            : countryFieldLabel,
                    'fieldHidden'                           : true,
                    'fieldType'                             : 'input',
                    'fieldBazScan'                          : true,
                    'fieldBazPostOnCreate'                  : countryFieldBazPostOnCreate,
                    'fieldBazPostOnUpdate'                  : countryFieldBazPostOnUpdate,
                    'fieldValue'                            : countryId
                ]
            )}}
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'country_name',
                    'fieldPlaceholder'                      : 'Search Country',
                    'fieldLabel'                            : countryFieldLabel,
                    'fieldType'                             : 'input',
                    'fieldHelp'                             : true,
                    'fieldHelpTooltipContent'               : 'Enter ' ~ countryFieldLabel,
                    'fieldBazScan'                          : true,
                    'fieldBazPostOnCreate'                  : countryFieldBazPostOnCreate,
                    'fieldBazPostOnUpdate'                  : countryFieldBazPostOnUpdate,
                    'fieldRequired'                         : true,
                    'fieldDataInputMinLength'               : 1,
                    'fieldDataInputMaxLength'               : 100,
                    'fieldValue'                            : countryName
                ]
            )}}
        </div>
    </div>
    <script>
/* globals autoComplete */
if (!window['dataCollection']['{{componentId}}']) {
    window['dataCollection']['{{componentId}}'] = { };
}
window['dataCollection']['{{componentId}}']['{{componentId}}-{{sectionId}}'] =
    $.extend(window['dataCollection']['{{componentId}}']['{{componentId}}-{{sectionId}}'], {
        '{{componentId}}-{{sectionId}}-street_address' : { },
        '{{componentId}}-{{sectionId}}-street_address_2' : { },
        '{{componentId}}-{{sectionId}}-city_id' : { },
        '{{componentId}}-{{sectionId}}-city_name' : {
            afterInit   : function() {

                window['dataCollection']['{{componentId}}']['{{componentId}}-{{sectionId}}']['{{componentId}}-{{sectionId}}-form']['autoCompleteCities'] =
                    new autoComplete({
                        data: {                              // Data src [Array, Function, Async] | (REQUIRED)
                            src: async() => {
                                const url = '{{links.url("geo/searchCity")}}';

                                var myHeaders = new Headers();
                                myHeaders.append("accept", "application/json");

                                var formdata = new FormData();
                                formdata.append("search", document.querySelector("#{{componentId}}-{{sectionId}}-city_name").value);
                                formdata.append($('.token').attr('name'), $('.token').val());

                                var requestOptions = {
                                    method: 'POST',
                                    headers: myHeaders,
                                    body: formdata
                                };

                                const response = await fetch(url, requestOptions);

                                const data = await response.json();

                                if (data.cities) {
                                    return data.cities;
                                } else {
                                    return [];
                                }

                            // src: function () {
                            //     var postData = { };

                            //     var tokenKey = $('.token').attr('name');
                            //     var token = $('.token').val();

                            //     postData['search'] = document.querySelector("#{{componentId}}-{{sectionId}}-city_name").value;
                            //     postData[tokenKey] = token;

                            //     var source;

                            //     $.ajax({
                            //         url             : '{{links.url("geo/searchCity")}}',
                            //         dataType        : 'json',
                            //         method          : 'post',
                            //         async           : false,
                            //         data            : postData,
                            //     }).done(function (data) {
                            //         if (data.responseCode === 0) {
                            //             source = data.cities;
                            //         } else {
                            //             source = [];
                            //         }
                            //     });

                            //     return source;
                            },
                            key: ["name"],
                            cache: false
                        },
                        selector: "#{{componentId}}-{{sectionId}}-city_name",                  // Input field selector              | (Optional)
                        threshold : 4,
                        debounce: 500,                       // Post duration for engine to start | (Optional)
                        searchEngine: "strict",              // Search Engine type/mode           | (Optional)
                        resultsList: {                       // Rendered results list object      | (Optional)
                            render: true,
                            /* if set to false, add an eventListener to the selector for event type
                               "autoComplete" to handle the result */
                            container: source => {
                                source.setAttribute("id", "{{componentId}}-{{sectionId}}-city_name_list");
                                source.setAttribute("class", "autoComplete_results");
                            },
                            destination: document.querySelector("#{{componentId}}-{{sectionId}}-city_name"),
                            position: "afterend",
                            element: "div"
                        },
                        maxResults: 5,                         // Max. number of rendered results | (Optional)
                        highlight: true,                       // Highlight matching results      | (Optional)
                        resultItem: {                          // Rendered result item            | (Optional)
                            content: (data, source) => {
                                source.innerHTML = data.match + ' <span>(State: ' + data.value.state_name + ', Country: ' + data.value.country_name + ')</span>';
                            },
                            element: "div"
                        },
                        noResults: () => {                     // Action script on noResults      | (Optional)
                            const result = document.createElement("li");
                            result.setAttribute("class", "autoComplete_result text-danger");
                            result.setAttribute("tabindex", "1");
                            result.innerHTML = "No search results. Click field help for more information.";
                            document.querySelector("#{{componentId}}-{{sectionId}}-city_name_list").appendChild(result);
                        },
                        onSelection: feedback => {             // Action script onSelection event | (Optional)
                            $('#{{componentId}}-{{sectionId}}-city_id').val(feedback.selection.value.id);
                            $('#{{componentId}}-{{sectionId}}-city_id').attr('value', feedback.selection.value.id);
                            $('#{{componentId}}-{{sectionId}}-city_name').blur();
                            $('#{{componentId}}-{{sectionId}}-city_name').val(feedback.selection.value.name);
                            $('#{{componentId}}-{{sectionId}}-city_name').attr('value', feedback.selection.value.name);
                            $('#{{componentId}}-{{sectionId}}-state_id').val(feedback.selection.value.state_id);
                            $('#{{componentId}}-{{sectionId}}-state_id').attr('value', feedback.selection.value.state_id);
                            $('#{{componentId}}-{{sectionId}}-state_name').val(feedback.selection.value.state_name);
                            $('#{{componentId}}-{{sectionId}}-state_name').attr('value', feedback.selection.value.state_name);
                            $('#{{componentId}}-{{sectionId}}-state_name').attr('disabled', true);
                            $('#{{componentId}}-{{sectionId}}-country_id').val(feedback.selection.value.country_id);
                            $('#{{componentId}}-{{sectionId}}-country_id').attr('value', feedback.selection.value.country_id);
                            $('#{{componentId}}-{{sectionId}}-country_name').val(feedback.selection.value.country_name);
                            $('#{{componentId}}-{{sectionId}}-country_name').attr('value', feedback.selection.value.country_name);
                            $('#{{componentId}}-{{sectionId}}-country_name').attr('disabled', true);
                        }
                });
                // On delete
                $('#{{componentId}}-{{sectionId}}-city_name').on('input propertychange', function() {
                    $('#{{componentId}}-{{sectionId}}-city_id').val(0);
                    $('#{{componentId}}-{{sectionId}}-city_id').attr('value', 0);
                    $('#{{componentId}}-{{sectionId}}-state_id').val(0);
                    $('#{{componentId}}-{{sectionId}}-state_id').attr('value', 0);
                    $('#{{componentId}}-{{sectionId}}-state_name').val('');
                    $('#{{componentId}}-{{sectionId}}-state_name').attr('value', '');
                    $('#{{componentId}}-{{sectionId}}-state_name').attr('disabled', false);
                    $('#{{componentId}}-{{sectionId}}-country_id').val(0);
                    $('#{{componentId}}-{{sectionId}}-country_id').attr('value', 0);
                    $('#{{componentId}}-{{sectionId}}-country_name').val('');
                    $('#{{componentId}}-{{sectionId}}-country_name').attr('value', '');
                    $('#{{componentId}}-{{sectionId}}-country_name').attr('disabled', false);
                });

                $('#{{componentId}}-{{sectionId}}-city_name').focusout(function() {
                    $('#{{componentId}}-{{sectionId}}-city_name_list').children('li').remove();
                })
            }
        },
        '{{componentId}}-{{sectionId}}-post_code' : { },
        '{{componentId}}-{{sectionId}}-state_id' : { },
        '{{componentId}}-{{sectionId}}-state_name' : {
            afterInit   : function() {

                window['dataCollection']['{{componentId}}']['{{componentId}}-{{sectionId}}']['{{componentId}}-{{sectionId}}-form']['autoCompleteStates'] =
                    new autoComplete({
                        data: {                              // Data src [Array, Function, Async] | (REQUIRED)
                            src: function () {
                                var postData = { };

                                var tokenKey = $('.token').attr('name');
                                var token = $('.token').val();

                                postData['search'] = document.querySelector("#{{componentId}}-{{sectionId}}-state_name").value;
                                postData[tokenKey] = token;

                                var source;

                                $.ajax({
                                    url             : '{{links.url("geo/searchState")}}',
                                    dataType        : 'json',
                                    method          : 'post',
                                    async           : false,
                                    data            : postData,
                                }).done(function (data) {
                                    if (data.responseCode === 0) {
                                        source = data.states;
                                    } else {
                                        source = [];
                                    }
                                });

                                return source;
                            },
                            key: ["name"],
                            cache: false
                        },
                        selector: "#{{componentId}}-{{sectionId}}-state_name",                  // Input field selector              | (Optional)
                        debounce: 500,                       // Post duration for engine to start | (Optional)
                        searchEngine: "strict",              // Search Engine type/mode           | (Optional)
                        resultsList: {                       // Rendered results list object      | (Optional)
                            render: true,
                            /* if set to false, add an eventListener to the selector for event type
                               "autoComplete" to handle the result */
                            container: source => {
                                source.setAttribute("id", "{{componentId}}-{{sectionId}}-state_name_list");
                                source.setAttribute("class", "autoComplete_results");
                            },
                            destination: document.querySelector("#{{componentId}}-{{sectionId}}-state_name"),
                            position: "afterend",
                            element: "div"
                        },
                        maxResults: 5,                         // Max. number of rendered results | (Optional)
                        highlight: true,                       // Highlight matching results      | (Optional)
                        resultItem: {                          // Rendered result item            | (Optional)
                            content: (data, source) => {
                                source.innerHTML = data.match + ' <span>(Country: ' + data.value.country_name + ')</span>';
                            },
                            element: "div"
                        },
                        noResults: () => {                     // Action script on noResults      | (Optional)
                            const result = document.createElement("li");
                            result.setAttribute("class", "autoComplete_result text-danger");
                            result.setAttribute("tabindex", "1");
                            result.innerHTML = "No search results. Click field help for more information.";
                            document.querySelector("#{{componentId}}-{{sectionId}}-state_name_list").appendChild(result);
                        },
                        onSelection: feedback => {             // Action script onSelection event | (Optional)
                            $('#{{componentId}}-{{sectionId}}-state_id').val(feedback.selection.value.id);
                            $('#{{componentId}}-{{sectionId}}-state_id').attr('value', feedback.selection.value.id);
                            $('#{{componentId}}-{{sectionId}}-state_name').val(feedback.selection.value.name);
                            $('#{{componentId}}-{{sectionId}}-state_name').attr('value', feedback.selection.value.name);
                            $('#{{componentId}}-{{sectionId}}-country_id').val(feedback.selection.value.country_id);
                            $('#{{componentId}}-{{sectionId}}-country_id').attr('value', feedback.selection.value.country_id);
                            $('#{{componentId}}-{{sectionId}}-country_name').val(feedback.selection.value.country_name);
                            $('#{{componentId}}-{{sectionId}}-country_name').attr('value', feedback.selection.value.country_name);
                            $('#{{componentId}}-{{sectionId}}-country_name').attr('disabled', true);
                        }
                });
                // On delete
                $('#{{componentId}}-{{sectionId}}-state_name').on('input propertychange', function() {
                    $('#{{componentId}}-{{sectionId}}-state_id').val(0);
                    $('#{{componentId}}-{{sectionId}}-state_id').attr('value', 0);
                    $('#{{componentId}}-{{sectionId}}-country_id').val(0);
                    $('#{{componentId}}-{{sectionId}}-country_id').attr('value', 0);
                    $('#{{componentId}}-{{sectionId}}-country_name').val('');
                    $('#{{componentId}}-{{sectionId}}-country_name').attr('value', '');
                    $('#{{componentId}}-{{sectionId}}-country_name').attr('disabled', false);
                });

                $('#{{componentId}}-{{sectionId}}-state_name').focusout(function() {
                    $('#{{componentId}}-{{sectionId}}-state_name_list').children('li').remove();
                })
            }
        },
        '{{componentId}}-{{sectionId}}-country_id' : { },
        '{{componentId}}-{{sectionId}}-country_name' : {
            afterInit   : function() {

                window['dataCollection']['{{componentId}}']['{{componentId}}-{{sectionId}}']['{{componentId}}-{{sectionId}}-form']['autoCompleteCountries'] =
                    new autoComplete({
                        data: {                              // Data src [Array, Function, Async] | (REQUIRED)
                            src: function () {
                                var postData = { };

                                var tokenKey = $('.token').attr('name');
                                var token = $('.token').val();

                                postData['search'] = document.querySelector("#{{componentId}}-{{sectionId}}-country_name").value;
                                postData[tokenKey] = token;

                                var source;

                                $.ajax({
                                    url             : '{{links.url("geo/searchCountry")}}',
                                    dataType        : 'json',
                                    method          : 'post',
                                    async           : false,
                                    data            : postData,
                                }).done(function (data) {
                                    if (data.responseCode === 0) {
                                        source = data.countries;
                                    } else {
                                        source = [];
                                    }
                                });

                                return source;
                            },
                            key: ["name"],
                            cache: false
                        },
                        selector: "#{{componentId}}-{{sectionId}}-country_name",                  // Input field selector              | (Optional)
                        debounce: 500,                       // Post duration for engine to start | (Optional)
                        searchEngine: "strict",              // Search Engine type/mode           | (Optional)
                        resultsList: {                       // Rendered results list object      | (Optional)
                            render: true,
                            /* if set to false, add an eventListener to the selector for event type
                               "autoComplete" to handle the result */
                            container: source => {
                                source.setAttribute("id", "{{componentId}}-{{sectionId}}-country_name_list");
                                source.setAttribute("class", "autoComplete_results");
                            },
                            destination: document.querySelector("#{{componentId}}-{{sectionId}}-country_name"),
                            position: "afterend",
                            element: "div"
                        },
                        maxResults: 5,                         // Max. number of rendered results | (Optional)
                        highlight: true,                       // Highlight matching results      | (Optional)
                        resultItem: {                          // Rendered result item            | (Optional)
                            content: (data, source) => {
                                source.innerHTML = data.match;
                            },
                            element: "div"
                        },
                        noResults: () => {                     // Action script on noResults      | (Optional)
                            const result = document.createElement("li");
                            result.setAttribute("class", "autoComplete_result text-danger");
                            result.setAttribute("tabindex", "1");
                            result.innerHTML = "No search results. Click field help for more information.";
                            document.querySelector("#{{componentId}}-{{sectionId}}-country_name_list").appendChild(result);
                        },
                        onSelection: feedback => {             // Action script onSelection event | (Optional)
                            $('#{{componentId}}-{{sectionId}}-country_id').val(feedback.selection.value.id);
                            $('#{{componentId}}-{{sectionId}}-country_id').attr('value', feedback.selection.value.id);
                            $('#{{componentId}}-{{sectionId}}-country_name').val(feedback.selection.value.name);
                            $('#{{componentId}}-{{sectionId}}-country_name').attr('value', feedback.selection.value.name);
                            // $('#{{componentId}}-{{sectionId}}-country_name').attr('disabled', true);
                        }
                });
                // On delete
                // $('#{{componentId}}-{{sectionId}}-country_name').on('input propertychange', function() {
                //     $('#{{componentId}}-{{sectionId}}-country_id').val(0);
                //     $('#{{componentId}}-{{sectionId}}-country_id').attr('value', 0);
                //     $('#{{componentId}}-{{sectionId}}-country_name').val('');
                //     $('#{{componentId}}-{{sectionId}}-country_name').attr('value', '');
                //     $('#{{componentId}}-{{sectionId}}-country_name').attr('disabled', false);
                // });

                $('#{{componentId}}-{{sectionId}}-country_name').focusout(function() {
                    $('#{{componentId}}-{{sectionId}}-country_name_list').children('li').remove();
                })
            }
        }
    });
// NOTE: Validation of address has to be done from calling component. Add the following to that component js
    // '{{componentId}}-{{sectionId}}-{{sectionId}}-form' : {
    //     rules: {
    //         '{{componentId}}-{{sectionId}}-street_address' : 'required',
    //         '{{componentId}}-{{sectionId}}-city' : 'required',
    //         '{{componentId}}-{{sectionId}}-post_Code' : 'required',
    //         '{{componentId}}-{{sectionId}}-state' : 'required',
    //         '{{componentId}}-{{sectionId}}-country' : 'required',
    //     },
    //     messages: {
    //         '{{componentId}}-{{sectionId}}-street_address' : 'Please enter business street address',
    //         '{{componentId}}-{{sectionId}}-city' : 'Please select city',
    //         '{{componentId}}-{{sectionId}}-post_Code' : 'Please enter post code',
    //         '{{componentId}}-{{sectionId}}-state' : 'Please select state',
    //         '{{componentId}}-{{sectionId}}-country' : 'Please select country'
    //     }
    // }
</script>
{% elseif searchType == 'state' %}
    <div class="row">
        <div class="col">
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'state_id',
                    'fieldLabel'                            : cityFieldLabel,
                    'fieldHidden'                           : true,
                    'fieldType'                             : 'input',
                    'fieldBazScan'                          : true,
                    'fieldBazPostOnCreate'                  : stateFieldBazPostOnCreate,
                    'fieldBazPostOnUpdate'                  : stateFieldBazPostOnUpdate,
                    'fieldValue'                            : stateId
                ]
            )}}
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'state_name',
                    'fieldPlaceholder'                      : 'Search State',
                    'fieldLabel'                            : stateFieldLabel,
                    'fieldType'                             : 'select2',
                    'fieldHelp'                             : true,
                    'fieldHelpTooltipContent'               : 'Enter ' ~ stateFieldLabel,
                    'fieldBazScan'                          : true,
                    'fieldBazPostOnCreate'                  : stateFieldBazPostOnCreate,
                    'fieldBazPostOnUpdate'                  : stateFieldBazPostOnUpdate,
                    'fieldRequired'                         : true,
                    'fieldDataInputMinLength'               : 1,
                    'fieldDataInputMaxLength'               : 100,
                    'fieldValue'                            : stateName
                ]
            )}}
        </div>
        <div class="col">
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'country_id',
                    'fieldLabel'                            : countryFieldLabel,
                    'fieldHidden'                           : true,
                    'fieldType'                             : 'input',
                    'fieldBazScan'                          : true,
                    'fieldBazPostOnCreate'                  : countryFieldBazPostOnCreate,
                    'fieldBazPostOnUpdate'                  : countryFieldBazPostOnUpdate,
                    'fieldValue'                            : countryId
                ]
            )}}
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'country_name',
                    'fieldPlaceholder'                      : 'Search Country',
                    'fieldLabel'                            : countryFieldLabel,
                    'fieldType'                             : 'input',
                    'fieldHelp'                             : true,
                    'fieldHelpTooltipContent'               : 'Enter ' ~ countryFieldLabel,
                    'fieldBazScan'                          : true,
                    'fieldBazPostOnCreate'                  : countryFieldBazPostOnCreate,
                    'fieldBazPostOnUpdate'                  : countryFieldBazPostOnUpdate,
                    'fieldRequired'                         : true,
                    'fieldDataInputMinLength'               : 1,
                    'fieldDataInputMaxLength'               : 100,
                    'fieldValue'                            : countryName
                ]
            )}}
        </div>
    </div>
    <script>
//Variables
var stateURL = window.dataCollection.env.rootPath + 'index.php?route=' + 'common/address/state';

$('#{{componentId}}-state').on('select2:clear', function(e) {
    'use strict';
    $('#{{componentId}}-country').empty().append(new Option()).trigger('change');
});

//Options to window
if (!window['dataCollection']['{{componentId}}']) {
    window['dataCollection']['{{componentId}}'] = { };
}
window['dataCollection']['{{componentId}}']['{{componentId}}-{{sectionId}}'] =
    $.extend(window['dataCollection']['{{componentId}}']['{{componentId}}-{{sectionId}}'], {
        '{{componentId}}-state' : {
            placeholder: "SEARCH STATE",
            ajax: {
                url: stateURL,
                dataType: 'json',
                method: 'post',
                data: function(params) {
                    'use strict';
                    return {
                        search: params.term
                    }
                },
                processResults: function(data) {
                    'use strict';
                    if (data.states) {
                        var statesData = [];
                        for (var item of data.states) {
                            statesData.push({
                                'id' : item['state'],
                                'text' : item['state_str']
                            });
                        }
                        $('#{{componentId}}-state').on('select2:select', function(e) {
                            var stateID = e.params.data.id;
                            $(data.states).each(function(i,state) {
                                if (state.state === stateID) {
                                    var newCountryOption = new Option(state.country_str, state.country, false, true);
                                    $('#{{componentId}}-country').append(newCountryOption);
                                }
                            });
                            $('#{{componentId}}-country').trigger('change.select2');
                            $('#select2-{{componentId}}-country-container .select2-selection__placeholder').text('SELECT COUNTRY');
                        });
                        return {
                            results: statesData
                        }
                    }
                },
                cache: true
            },
            minimumInputLength : 2
        },
        '{{componentId}}-country' : { },
    });
// NOTE: Validation of address has to be done from calling component. Add the following to that component js
    // '{{componentId}}-{{sectionId}}-form' : {
    //     rules: {
    //         '{{componentId}}-street_address' : 'required',
    //         '{{componentId}}-city' : 'required',
    //         '{{componentId}}-post_Code' : 'required',
    //         '{{componentId}}-state' : 'required',
    //         '{{componentId}}-country' : 'required',
    //     },
    //     messages: {
    //         '{{componentId}}-street_address' : 'Please enter business street address',
    //         '{{componentId}}-city' : 'Please select city',
    //         '{{componentId}}-post_Code' : 'Please enter post code',
    //         '{{componentId}}-state' : 'Please select state',
    //         '{{componentId}}-country' : 'Please select country'
    //     }
    // }
</script>
{% elseif searchType == 'country' %}
    <div class="row">
        <div class="col">
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'country_id',
                    'fieldLabel'                            : countryFieldLabel,
                    'fieldHidden'                           : true,
                    'fieldType'                             : 'input',
                    'fieldBazScan'                          : true,
                    'fieldBazPostOnCreate'                  : countryFieldBazPostOnCreate,
                    'fieldBazPostOnUpdate'                  : countryFieldBazPostOnUpdate,
                    'fieldValue'                            : countryId
                ]
            )}}
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'country',
                    'fieldPlaceholder'                      : 'Search Country',
                    'fieldLabel'                            : countryFieldLabel,
                    'fieldType'                             : 'input',
                    'fieldHelp'                             : true,
                    'fieldHelpTooltipContent'               : 'Enter ' ~ countryFieldLabel,
                    'fieldBazScan'                          : true,
                    'fieldBazPostOnCreate'                  : countryFieldBazPostOnCreate,
                    'fieldBazPostOnUpdate'                  : countryFieldBazPostOnUpdate,
                    'fieldRequired'                         : true,
                    'fieldDataInputMinLength'               : 1,
                    'fieldDataInputMaxLength'               : 100,
                    'fieldValue'                            : countryName
                ]
            )}}
        </div>
    </div>
    <script>
//Variables
var countryURL = window.dataCollection.env.rootPath + 'index.php?route=' + 'common/address/country';

//Options to window
if (!window['dataCollection']['{{componentId}}']) {
    window['dataCollection']['{{componentId}}'] = { };
}
window['dataCollection']['{{componentId}}']['{{componentId}}-{{sectionId}}'] =
    $.extend(window['dataCollection']['{{componentId}}']['{{componentId}}-{{sectionId}}'], {
        '{{componentId}}-country' : {
            placeholder: "SEARCH COUNTRY",
            ajax: {
                url: countryURL,
                dataType: 'json',
                method: 'post',
                data: function(params) {
                    'use strict';
                    return {
                        search: params.term
                    }
                },
                processResults: function(data) {
                    'use strict';
                    if (data.countries) {
                        var countriesData = [];
                        for (var item of data.countries) {
                            countriesData.push({
                                'id' : item['country'],
                                'text' : item['country_str']
                            });
                        }
                        return {
                            results: countriesData
                        }
                    }
                },
                cache: true
            },
            minimumInputLength : 2
        },
    });
// NOTE: Validation of address has to be done from calling component. Add the following to that component js
    // '{{componentId}}-{{sectionId}}-form' : {
    //     rules: {
    //         '{{componentId}}-street_address' : 'required',
    //         '{{componentId}}-city' : 'required',
    //         '{{componentId}}-post_Code' : 'required',
    //         '{{componentId}}-state' : 'required',
    //         '{{componentId}}-country' : 'required',
    //     },
    //     messages: {
    //         '{{componentId}}-street_address' : 'Please enter business street address',
    //         '{{componentId}}-city' : 'Please select city',
    //         '{{componentId}}-post_Code' : 'Please enter post code',
    //         '{{componentId}}-state' : 'Please select state',
    //         '{{componentId}}-country' : 'Please select country'
    //     }
    // }
</script>
{% endif %}