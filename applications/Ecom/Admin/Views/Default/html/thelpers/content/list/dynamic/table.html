{% if dtParams['dtLengthMenu'] is not defined %}
    {% set dtParams['dtLengthMenu'] = [ [20, 40, -1], [20, 40, "All"] ] %}
{% endif %}
{% if dtParams['dtPrimaryButtons'] is defined %}
    <div id="{{dtParams['componentId']}}-{{dtParams['sectionId']}}-primary-buttons" class="row mb-2">
        <div class="col">
            {% include 'thelpers/buttons' with ['dtPrimaryButtons' : dtParams['dtPrimaryButtons']] %}
        </div>
    </div>
{% endif %}
{% if dtParams['Striped'] is defined %}
    {% set hasTableStriped = 'table-striped' %}
{% endif %}
{% if dtParams['Bordered'] is defined %}
    {% set hasTableBordered = 'table-bordered' %}
{% endif %}
<div id="{{dtParams['componentId']}}-{{dtParams['sectionId']}}" class="row">
    <div class="col">
        <div class="row m-2 text-center" id="list-data-loader">
            <div class="col">
                <div class="fa-2x">
                    <i class="fa fa-cog fa-spin"></i> Loading...
                </div>
            </div>
        </div>
        <table id="{{dtParams['componentId']}}-{{dtParams['sectionId']}}-table" class="table {{hasTableStriped}} {{hasTableBordered}}" style="margin:0 !important;" width="100%" cellspacing="0">
            <tbody></tbody>
        </table>
    </div>
</div>
<script>
if (!window['dataCollection']['{{dtParams["componentId"]}}']) {
    window['dataCollection']['{{dtParams["componentId"]}}'] = { };
}
window['dataCollection']['{{dtParams["componentId"]}}']['{{dtParams["componentId"]}}-{{dtParams["sectionId"]}}'] =
    $.extend(window['dataCollection']['{{dtParams["componentId"]}}']['{{dtParams["componentId"]}}-{{dtParams["sectionId"]}}'], {
        '{{dtParams["componentId"]}}-{{dtParams["sectionId"]}}-table' : {
            'listOptions'       : {
                'componentName'         : '{{dtParams["componentName"]}}',
                'tableName'             : '{{dtParams["componentId"]}}-{{dtParams["sectionId"]}}-table',
                'postURL'               : '{{dtParams["table"]["ajax"]["url"]}}',
                'postParams'            : {
                    'operation'             : 'load',
                    'results'               : '{{dtParams["NoOfResultsToShow"]|default(20)}}'
                },
                'datatable'     : {
                    'columns'                           : '{{dtParams["dtColumns"]}}',
                    'NoOfColumnsToShow'                 : '{{dtParams["dtNoOfColumnsToShow"]|default("3")}}',
                    'hasIdColumn'                       : '{{dtParams["dtHasIdColumn"]|default("true")}}',
                    'hideIdColumn'                      : '{{dtParams["dtHideIdColumn"]|default("true")}}',
                    'showHideColumnsButton'             : '{{dtParams["dtShowHideColumnsButton"]|default("true")}}',
                    'showHideExportButton'              : '{{dtParams["dtShowHideExportButton"]|default("true")}}',
                    'colReorder'                        : '{{dtParams["dtColReorder"]|default("false")}}',
                    'stateSave'                         : '{{dtParams["dtStateSave"]|default("false")}}',
                    'fixedHeader'                       : '{{dtParams["dtFixedHeader"]|default("true")}}',
                    'searching'                         : '{{dtParams["dtSearching"]|default("true")}}',
                    'responsive'                        : '{{dtParams["dtResponsive"]|default("true")}}',
                    'paging'                            : '{{dtParams["dtPaging"]|default("false")}}',
                    'lengthMenu'                        : '{{dtParams["dtLengthMenu"]|json_encode|e("js")}}',
                    'select'                            : '{{dtParams["dtSelect"]|default("false")}}',
                    'selectAll'                         : '{{dtParams["dtSelectAll"]|default("false")}}',
                    'selectStyle'                       : '{{dtParams["dtSelectStyle"]|default("single")}}',
                    'disableColumnsOrdering'            : '{{dtParams["dtDisableColumnsOrdering"]|json_encode|e("js")}}',
                    'zeroRecords'                       : '{{dtParams["dtZeroRecords"]|default("missing dtZeroRecords")}}',
                    'notificationTextFromColumn'        : '{{dtParams["dtNotificationTextFromColumn"]|default("name")}}',//What text to show on delete message
                    'sendConfirmRemove'                 : '{{dtParams["dtSendConfirmRemove"]|default("false")}}'
                }
            },
            'customFunctions' : {
                'beforeTableInit'   : function() { 'use strict'; },
                'afterTableInit'    : function() { 'use strict'; },
                'beforeRedraw'      : function() { 'use strict'; },
                'afterRedraw'       : function() { 'use strict'; }
            }
        }
    });

window['dataCollection']['{{dtParams["componentId"]}}']['{{dtParams["componentId"]}}-{{dtParams["sectionId"]}}']['{{dtParams["componentId"]}}-{{dtParams["sectionId"]}}-table']['listOptions']['postParams'] =
    $.extend(window['dataCollection']['{{dtParams["componentId"]}}']['{{dtParams["componentId"]}}-{{dtParams["sectionId"]}}']['{{dtParams["componentId"]}}-{{dtParams["sectionId"]}}-table']['listOptions']['postParams'], '{{table["ajax"]["params"]}}');
</script>