{% set apiAccess = 'apioff' %}
{% set apiAuthorizationUsing = 'acl' %}
{% set scopesDisabled = true %}
{% set apiRegistrationAllowedDisabled = true %}
{% set apiClientIdLengthDisabled = true %}
{% set apiClientSecretLengthDisabled = true %}
{% set apiGrantTypesDisabled = true %}
{% set generateDisabled = true %}
{% set reGenerateDisabled = true %}
{% set pkiKeySizeDisabled = true %}
{% set pkiAlgorithmsDisabled = true %}
{% set apiRefreshTokenDisabled = false %}
{% if app['api_access'] is defined and app['api_access'] == 'true' %}
    {% set apiAccess = 'apion' %}
    {% set apiRegistrationAllowedDisabled = false %}
    {% set apiClientIdLengthDisabled = false %}
    {% set apiClientSecretLengthDisabled = false %}
    {% set apiGrantTypesDisabled = false %}
    {% set generateDisabled = false %}
    {% set reGenerateDisabled = false %}
    {% set pkiKeySizeDisabled = false %}
    {% set pkiAlgorithmsDisabled = false %}
{% endif %}
{% set apiRegistrationAllowed = false %}
{% if app['api_registration_allowed'] == true %}
    {% set apiRegistrationAllowed = true %}
{% endif %}
{% set apiClientIdLength = 8 %}
{% set apiClientSecretLength = 32 %}
{% if app['api_client_id_length'] is defined %}
    {% set apiClientIdLength = app['api_client_id_length'] %}
{% endif %}
{% if app['api_client_secret_length'] is defined %}
    {% set apiClientSecretLength = app['api_client_secret_length'] %}
{% endif %}
{% set apiAccessTokenTimeout = 'PT1H' %}
{% set apiRefreshTokenTimeout = 'P1M' %}
{% if app['api_access_token_timeout'] is defined %}
    {% set apiAccessTokenTimeout = app['api_access_token_timeout'] %}
{% endif %}
{% if app['api_refresh_token_timeout'] is defined %}
    {% set apiRefreshTokenTimeout = app['api_refresh_token_timeout'] %}
{% endif %}
{% if app['api_grant_type'] === 'client_credentials' %}
    {% set apiRefreshTokenTimeout = '' %}
    {% set apiRefreshTokenDisabled = true %}
{% endif %}
{% if app['api_authorization_using'] is defined %}
    {% set apiAuthorizationUsing = app['api_authorization_using'] %}
    {% if apiAuthorizationUsing === 'scopes' %}
        {% set scopesDisabled = false %}
    {% endif %}
{% endif %}
{% if app['api_scopes'] === '' or not app['api_scopes'] %}
    {% set app['api_scopes'] = '*' %}
{% endif %}
<div class="row">
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                             : component,
                'componentName'                         : componentName,
                'componentId'                           : componentId,
                'sectionId'                             : sectionId,
                'fieldId'                               : 'api',
                'fieldLabel'                            : 'API',
                'fieldLabelLegend'                      : true,
                'fieldHidden'                           : false,
                'fieldType'                             : 'html',
                'fieldBazScan'                          : false,
                'fieldBazPostOnCreate'                  : false,
                'fieldBazPostOnUpdate'                  : false,
                'fieldBazJstreeSearch'                  : true,
                'fieldHtmlContent'                      : ''
            ]
        )}}
    </div>
</div>
<div class="row">
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                      : component,
                'componentName'                  : componentName,
                'componentId'                    : componentId,
                'sectionId'                      : sectionId,
                'fieldId'                        : 'api_access',
                'fieldLabel'                     : 'API Access',
                'fieldType'                      : 'radio',
                'fieldHelp'                      : true,
                'fieldHelpTooltipContent'        : 'Switch on to allow API access for this app. Note: You also need to allow API access on the domain for this app.',
                'fieldRequired'                  : true,
                'fieldBazJstreeSearch'           : true,
                'fieldBazPostOnUpdate'           : true,
                'fieldBazScan'                   : true,
                'fieldRadioPlacementType'        : 'horizontal',
                'fieldRadioButtons'              :
                    [
                        'apioff' :
                            [
                                'title'                           : 'OFF',
                                'type'                            : 'secondary',
                                'dataValue'                       : 'apioff'
                            ],
                        'apion' :
                            [
                                'title'                           : 'ON',
                                'type'                            : 'primary',
                                'dataValue'                       : 'apion'
                            ]
                    ],
                'fieldRadioChecked'              : apiAccess
            ]
        )}}
    </div>
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                      : component,
                'componentName'                  : componentName,
                'componentId'                    : componentId,
                'sectionId'                      : sectionId,
                'fieldId'                        : 'api_registration_allowed',
                'fieldLabel'                     : 'Allow API Registration?',
                'fieldType'                      : 'checkbox',
                'fieldHelp'                      : true,
                'fieldHelpTooltipContent'        : 'Allow users to register for API on this App.',
                'fieldCheckboxType'              : 'success',
                'fieldCheckboxChecked'           : apiRegistrationAllowed,
                'fieldCheckboxAdditionClass'     : 'text-sm text-uppercase',
                'fieldDisabled'                  : apiRegistrationAllowedDisabled,
                'fieldBazScan'                   : true,
                'fieldBazJstreeSearch'           : true,
                'fieldBazPostOnCreate'           : true,
                'fieldBazPostOnUpdate'           : true
            ]
        )}}
    </div>
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                             : component,
                'componentName'                         : componentName,
                'componentId'                           : componentId,
                'sectionId'                             : sectionId,
                'fieldId'                               : 'api_client_id_length',
                'fieldLabel'                            : 'Client ID Length',
                'fieldType'                             : 'input',
                'fieldHelp'                             : true,
                'fieldHelpTooltipContent'               : 'Enter client ID length to be generated.',
                'fieldInputTypeTextFilter'              : 'positiveInt',
                'fieldRequired'                         : true,
                'fieldDisabled'                         : apiClientIdLengthDisabled,
                'fieldBazScan'                          : true,
                'fieldBazJstreeSearch'                  : true,
                'fieldBazPostOnUpdate'                  : true,
                'fieldDataInputMinNumber'               : 8,
                'fieldDataInputMaxNumber'               : 32,
                'fieldDataInputMaxLength'               : 2,
                'fieldValue'                            : apiClientIdLength
            ]
        )}}
    </div>
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                             : component,
                'componentName'                         : componentName,
                'componentId'                           : componentId,
                'sectionId'                             : sectionId,
                'fieldId'                               : 'api_client_secret_length',
                'fieldLabel'                            : 'Client Secret Length',
                'fieldType'                             : 'input',
                'fieldHelp'                             : true,
                'fieldHelpTooltipContent'               : 'Enter client Secret length to be generated.',
                'fieldInputTypeTextFilter'              : 'positiveInt',
                'fieldRequired'                         : true,
                'fieldDisabled'                         : apiClientSecretLengthDisabled,
                'fieldBazScan'                          : true,
                'fieldBazJstreeSearch'                  : true,
                'fieldBazPostOnUpdate'                  : true,
                'fieldDataInputMinNumber'               : 8,
                'fieldDataInputMaxNumber'               : 32,
                'fieldDataInputMaxLength'               : 2,
                'fieldValue'                            : apiClientSecretLength
            ]
        )}}
    </div>
</div>
<hr>
<div class="row">
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                             : component,
                'componentName'                         : componentName,
                'componentId'                           : componentId,
                'sectionId'                             : sectionId,
                'fieldId'                               : 'keys',
                'fieldLabel'                            : 'Keys',
                'fieldLabelLegend'                      : true,
                'fieldHidden'                           : false,
                'fieldType'                             : 'html',
                'fieldBazScan'                          : false,
                'fieldBazPostOnCreate'                  : false,
                'fieldBazPostOnUpdate'                  : false,
                'fieldBazJstreeSearch'                  : true,
                'fieldHtmlContent'                      : ''
            ]
        )}}
    </div>
</div>
<div class="row">
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                             : component,
                'componentName'                         : componentName,
                'componentId'                           : componentId,
                'sectionId'                             : sectionId,
                'fieldId'                               : 'pki_key_size',
                'fieldLabel'                            : 'PKI Key Size',
                'fieldType'                             : 'select2',
                'fieldHelp'                             : true,
                'fieldHelpTooltipContent'               : 'Select PKI key size.',
                'fieldBazScan'                          : true,
                'fieldRequired'                         : true,
                'fieldDisabled'                         : pkiKeySizeDisabled,
                'fieldBazJstreeSearch'                  : true,
                'fieldBazPostOnUpdate'                  : true,
                'fieldDataSelect2Options'               : availableOpensslKeyBits,
                'fieldDataSelect2OptionsKey'            : 'id',
                'fieldDataSelect2OptionsValue'          : 'name',
                'fieldDataSelect2OptionsArray'          : true,
                'fieldDataSelect2OptionsSelected'       : apiKeysParams[0]
            ]
        )}}
    </div>
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                             : component,
                'componentName'                         : componentName,
                'componentId'                           : componentId,
                'sectionId'                             : sectionId,
                'fieldId'                               : 'pki_algorithm',
                'fieldLabel'                            : 'PKI Algorithm',
                'fieldType'                             : 'select2',
                'fieldHelp'                             : true,
                'fieldHelpTooltipContent'               : 'Select PKI Algorithm.',
                'fieldBazScan'                          : true,
                'fieldRequired'                         : true,
                'fieldDisabled'                         : pkiAlgorithmsDisabled,
                'fieldBazJstreeSearch'                  : true,
                'fieldBazPostOnUpdate'                  : true,
                'fieldDataSelect2Options'               : availableOpensslAlgorithms,
                'fieldDataSelect2OptionsKey'            : 'id',
                'fieldDataSelect2OptionsValue'          : 'name',
                'fieldDataSelect2OptionsArray'          : true,
                'fieldDataSelect2OptionsSelected'       : apiKeysParams[1]
            ]
        )}}
    </div>
        <div class="col">
            {{adminltetags.useTag('fields',
                [
                    'component'                             : component,
                    'componentName'                         : componentName,
                    'componentId'                           : componentId,
                    'sectionId'                             : sectionId,
                    'fieldId'                               : 'encryption_key_size',
                    'fieldLabel'                            : 'Encryption Key Size',
                    'fieldType'                             : 'input',
                    'fieldHelp'                             : true,
                    'fieldHelpTooltipContent'               : 'Enter encryption key size.',
                    'fieldInputTypeTextFilter'              : 'positiveInt',
                    'fieldRequired'                         : true,
                    'fieldDisabled'                         : false,
                    'fieldBazScan'                          : true,
                    'fieldBazJstreeSearch'                  : true,
                    'fieldBazPostOnUpdate'                  : true,
                    'fieldDataInputMinNumber'               : 8,
                    'fieldDataInputMaxNumber'               : 32,
                    'fieldDataInputMaxLength'               : 2,
                    'fieldValue'                            : apiKeysParams[2]
                ]
            )}}
        </div>
    {% if app['api_private_key'] == '1' %}
        {% set reGenerateHidden = false %}
        {% set generateHidden = true %}
    {% else %}
        {% set reGenerateHidden = true %}
        {% set generateHidden = false %}
    {% endif %}
    <div class="col">
        {{adminltetags.useTag('buttons',
            [
                'component'                 : component,
                'componentName'             : componentName,
                'componentId'               : componentId,
                'sectionId'                 : sectionId,
                'buttonType'                : 'button',
                'buttonLabel'               : 'Keys',
                'buttons'                   :
                    {
                        'generate-pki'   : {
                            'title'                   : 'Generate Keys',
                            'size'                    : 'sm',
                            'type'                    : 'primary',
                            'icon'                    : 'cog fa-spin',
                            'iconHidden'              : true,
                            'disabled'                : generateDisabled,
                            'hidden'                  : generateHidden
                        },
                        'regenerate-pki'  : {
                            'title'                   : 'Regenerate Keys',
                            'size'                    : 'sm',
                            'type'                    : 'danger',
                            'icon'                    : 'cog fa-spin',
                            'iconHidden'              : true,
                            'disabled'                : reGenerateDisabled,
                            'hidden'                  : reGenerateHidden
                        }
                    }
            ]
        )}}
    </div>
</div>
<hr>
<div class="row">
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                             : component,
                'componentName'                         : componentName,
                'componentId'                           : componentId,
                'sectionId'                             : sectionId,
                'fieldId'                               : 'grant',
                'fieldLabel'                            : 'Grant',
                'fieldLabelLegend'                      : true,
                'fieldHidden'                           : false,
                'fieldType'                             : 'html',
                'fieldBazScan'                          : false,
                'fieldBazPostOnCreate'                  : false,
                'fieldBazPostOnUpdate'                  : false,
                'fieldBazJstreeSearch'                  : true,
                'fieldHtmlContent'                      : ''
            ]
        )}}
    </div>
</div>
<div class="row">
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                             : component,
                'componentName'                         : componentName,
                'componentId'                           : componentId,
                'sectionId'                             : sectionId,
                'fieldId'                               : 'api_grant_type',
                'fieldLabel'                            : 'API Grant Type',
                'fieldType'                             : 'select2',
                'fieldHelp'                             : true,
                'fieldHelpTooltipContent'               : 'Select API grant type.',
                'fieldBazScan'                          : true,
                'fieldRequired'                         : true,
                'fieldDisabled'                         : apiGrantTypesDisabled,
                'fieldBazJstreeSearch'                  : true,
                'fieldBazPostOnUpdate'                  : true,
                'fieldDataSelect2Options'               : availableAPIGrantTypes,
                'fieldDataSelect2OptionsKey'            : 'id',
                'fieldDataSelect2OptionsValue'          : 'name',
                'fieldDataSelect2OptionsArray'          : true,
                'fieldDataSelect2OptionsSelected'       : app['api_grant_type']
            ]
        )}}
    </div>
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                             : component,
                'componentName'                         : componentName,
                'componentId'                           : componentId,
                'sectionId'                             : sectionId,
                'fieldId'                               : 'api_access_token_timeout',
                'fieldLabel'                            : 'API Access Token Timeout',
                'fieldType'                             : 'input',
                'fieldHelp'                             : true,
                'fieldHelpTooltipContent'               : 'Enter timeout for access token in php dateinterval duration format. Example: P1M10D means 1 month and 10 days. PT1H30M means 1 Hour and 30 mins. See php DateInterval for documentation on format. Default is PT1H (1 Hour)',
                'fieldDisabled'                         : false,
                'fieldBazScan'                          : true,
                'fieldBazJstreeSearch'                  : true,
                'fieldBazPostOnUpdate'                  : true,
                'fieldDataInputMaxLength'               : 30,
                'fieldValue'                            : apiAccessTokenTimeout
            ]
        )}}
    </div>
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                             : component,
                'componentName'                         : componentName,
                'componentId'                           : componentId,
                'sectionId'                             : sectionId,
                'fieldId'                               : 'api_refresh_token_timeout',
                'fieldLabel'                            : 'API Refresh Token Timeout',
                'fieldType'                             : 'input',
                'fieldHelp'                             : true,
                'fieldHelpTooltipContent'               : 'Enter timeout for access token in php dateinterval duration format. Example: P1M10D means 1 month and 10 days. PT1H30M means 1 Hour and 30 mins. See php DateInterval for documentation on format. Default is P1M (1 Month)',
                'fieldDisabled'                         : apiRefreshTokenDisabled,
                'fieldBazScan'                          : true,
                'fieldBazJstreeSearch'                  : true,
                'fieldBazPostOnUpdate'                  : true,
                'fieldDataInputMaxLength'               : 30,
                'fieldValue'                            : apiRefreshTokenTimeout
            ]
        )}}
    </div>
</div>
<div class="row">
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                             : component,
                'componentName'                         : componentName,
                'componentId'                           : componentId,
                'sectionId'                             : sectionId,
                'fieldId'                               : 'authorization',
                'fieldLabel'                            : 'API Authorization',
                'fieldLabelLegend'                      : true,
                'fieldHidden'                           : false,
                'fieldType'                             : 'html',
                'fieldBazScan'                          : false,
                'fieldBazPostOnCreate'                  : false,
                'fieldBazPostOnUpdate'                  : false,
                'fieldBazJstreeSearch'                  : true,
                'fieldHtmlContent'                      : ''
            ]
        )}}
    </div>
</div>
<div class="row">
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                      : component,
                'componentName'                  : componentName,
                'componentId'                    : componentId,
                'sectionId'                      : sectionId,
                'fieldId'                        : 'api_authorization_using',
                'fieldLabel'                     : 'API Authorization Using',
                'fieldType'                      : 'radio',
                'fieldHelp'                      : true,
                'fieldHelpTooltipContent'        : 'API can be authorized using ACL middleware or using scopes.',
                'fieldRequired'                  : true,
                'fieldBazJstreeSearch'           : true,
                'fieldBazPostOnUpdate'           : true,
                'fieldBazScan'                   : true,
                'fieldRadioPlacementType'        : 'horizontal',
                'fieldRadioButtons'              :
                    [
                        'acl' :
                            [
                                'title'                           : 'ACL',
                                'type'                            : 'primary',
                                'dataValue'                       : 'acl'
                            ],
                        'scopes' :
                            [
                                'title'                           : 'SCOPES',
                                'type'                            : 'primary',
                                'dataValue'                       : 'scopes'
                            ]
                    ],
                'fieldRadioChecked'              : apiAuthorizationUsing
            ]
        )}}
    </div>
</div>
<div class="row">
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                      : component,
                'componentName'                  : componentName,
                'componentId'                    : componentId,
                'sectionId'                      : sectionId,
                'fieldId'                        : 'api_scopes',
                'fieldLabel'                     : 'API Scopes',
                'fieldType'                      : 'textarea',
                'fieldDataMaxLength'             : 4096,
                'fieldHelp'                      : true,
                'fieldHelpTooltipContent'        : 'Scopes of this API. Note: * symbol means allow everything.',
                'fieldRequired'                  : true,
                'fieldDisabled'                  : scopesDisabled,
                'fieldBazScan'                   : true,
                'fieldBazJstreeSearch'           : true,
                'fieldBazPostOnCreate'           : true,
                'fieldBazPostOnUpdate'           : true,
                'fieldDataInputMaxLength'        : 4096,
                'fieldTextareaRows'              : 8,
                'fieldValue'                     : app['api_scopes']
            ]
        )}}
    </div>
</div>