{% if customer['id'] is defined %}
    {% set customerPortrait = customer['portrait'] %}
    {% set customerId = customer['id'] %}
    {% set customerAccountId = customer['account_id'] %}
    {% set customerAccountEmail = customer['account_email'] %}
    {% set customerGroupId = customer['customer_group_id'] %}
    {% set customerFirstName = customer['first_name'] %}
    {% set customerLastName = customer['last_name'] %}
    {% set contactSource = customer['contact_source'] %}
    {% set contactSourceDetails = customer['contact_source_details'] %}
    {% set contactReferrerId = customer['contact_referrer_id'] %}
    {% set contactReferrer = customer['contact_referrer_full_name'] %}
{% else %}
    {% set customerPortrait = '' %}
    {% set customerId = '' %}
    {% set customerAccountId = '' %}
    {% set customerAccountEmail = '' %}
    {% set customerGroupId = '' %}
    {% set customerFirstName = '' %}
    {% set customerLastName = '' %}
    {% set contactSource = '' %}
    {% set contactSourceDetails = '' %}
    {% set contactReferrerId = '' %}
    {% set contactReferrer = '' %}
{% endif %}
<div class="row vdivide">
    <div class="col-md-3 col-sm-12">
        {{adminltetags.useTag('fields',
            [
                'component'                      : component,
                'componentName'                  : componentName,
                'componentId'                    : componentId,
                'sectionId'                      : sectionId,
                'fieldId'                        : 'portrait',
                'fieldLabel'                     : false,
                'fieldType'                      : 'files/croppie',
                'fieldValue'                     : customerPortrait,
                'imageType'                      : 'portrait',
                'storageType'                    : 'private',
                'upload'                         : true,
                'portraitLink'                   : portraitLink
            ]
        )}}
    </div>
    <div class="col">
        <div class="row">
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'id',
                        'fieldLabel'                     : 'Contact ID',
                        'fieldType'                      : 'input',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Contact ID (Auto Generated)',
                        'fieldRequired'                  : true,
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : false,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldHidden'                    : true,
                        'fieldDisabled'                  : true,
                        'fieldValue'                     : customerId
                    ]
                )}}
            </div>
        </div>
        <div class="row">
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                             : component,
                        'componentName'                         : componentName,
                        'componentId'                           : componentId,
                        'sectionId'                             : sectionId,
                        'fieldId'                               : 'account_email',
                        'fieldLabel'                            : 'Email',
                        'fieldType'                             : 'input',
                        'fieldPlaceholder'                      : 'Email',
                        'fieldHelp'                             : true,
                        'fieldHelpTooltipContent'               : 'Contact Email address. If field is disabled, it means customer has an account on this system. Only Systems Administrators can change the email address.',
                        'fieldBazScan'                          : true,
                        'fieldBazJstreeSearch'                  : true,
                        'fieldBazPostOnCreate'                  : true,
                        'fieldBazPostOnUpdate'                  : true,
                        'fieldRequired'                         : true,
                        'fieldDataInputMinLength'               : 1,
                        'fieldDataInputMaxLength'               : 50,
                        'fieldValue'                            : customerAccountEmail
                    ]
                )}}
            </div>
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                            : component,
                        'componentName'                        : componentName,
                        'componentId'                          : componentId,
                        'sectionId'                            : sectionId,
                        'fieldId'                              : 'customer_group_id',
                        'fieldLabel'                           : 'Customer Group',
                        'fieldType'                            : 'select2',
                        'fieldHelp'                            : true,
                        'fieldHelpTooltipContent'              : 'Select the customer group for this customer.',
                        'fieldRequired'                        : true,
                        'fieldBazScan'                         : true,
                        'fieldBazJstreeSearch'                 : true,
                        'fieldBazPostOnCreate'                 : true,
                        'fieldBazPostOnUpdate'                 : true,
                        'fieldDataSelect2Options'              : customergroups,
                        'fieldDataSelect2OptionsKey'           : 'id',
                        'fieldDataSelect2OptionsValue'         : 'name',
                        'fieldDataSelect2OptionsArray'         : true,
                        'fieldDataSelect2OptionsSelected'      : customerGroupId
                    ]
                )}}
            </div>
            <div class="col">
                {% if customerAccountId is defined and customerAccountId !== '' and customerAccountId != '0' %}
                    {% set linkHidden = false %}
                    {% set createLink =
                        '<a href="' ~ links.url('system/users/accounts/q/id/' ~ customerAccountId) ~ '" type="button" data-id="' ~ customerAccountId ~ '" class="text-white btn btn-primary btn-xs text-uppercase contentAjaxLink">
                            <i class="fas fa-fw fa-xs fa-external-link-alt"></i>
                        </a>'
                    %}
                    {% set createHidden = true %}
                {% else %}
                    {% set createLink = '' %}
                    {% set linkHidden = true %}
                    {% set createHidden = false %}
                {% endif %}
                {{adminltetags.useTag('fields',
                    [
                        'component'                             : component,
                        'componentName'                         : componentName,
                        'componentId'                           : componentId,
                        'sectionId'                             : sectionId,
                        'fieldId'                               : 'account_id',
                        'fieldLabel'                            : 'Account ID',
                        'fieldHidden'                           : true,
                        'fieldType'                             : 'input',
                        'fieldBazScan'                          : true,
                        'fieldBazPostOnCreate'                  : true,
                        'fieldBazPostOnUpdate'                  : true,
                        'fieldValue'                            : customerAccountId
                    ]
                )}}
                {{adminltetags.useTag('fields',
                    [
                        'component'                             : component,
                        'componentName'                         : componentName,
                        'componentId'                           : componentId,
                        'sectionId'                             : sectionId,
                        'fieldId'                               : 'create_account',
                        'fieldLabel'                            : 'Create User Account?',
                        'fieldHelp'                             : true,
                        'fieldHelpTooltipContent'               : 'Create user account for this customer?',
                        'fieldRequired'                         : false,
                        'fieldHidden'                           : createHidden,
                        'fieldType'                             : 'checkbox',
                        'fieldCheckboxType'                     : 'info',
                        'fieldBazJstreeSearch'                  : true,
                        'fieldBazPostOnCreate'                  : true,
                        'fieldBazPostOnUpdate'                  : true,
                        'fieldBazScan'                          : true
                    ]
                )}}
                {{adminltetags.useTag('fields',
                    [
                        'component'                             : component,
                        'componentName'                         : componentName,
                        'componentId'                           : componentId,
                        'sectionId'                             : sectionId,
                        'fieldId'                               : 'account_link',
                        'fieldLabel'                            : 'User Account',
                        'fieldType'                             : 'html',
                        'fieldHelp'                             : true,
                        'fieldHidden'                           : linkHidden,
                        'fieldHelpTooltipContent'               : 'User account link',
                        'fieldAdditionalClass'                  : 'mb-0',
                        'fieldHtmlContent'                      : createLink,
                        'fieldBazScan'                          : true,
                        'fieldBazJstreeSearch'                  : true,
                        'fieldBazPostOnCreate'                  : false,
                        'fieldBazPostOnUpdate'                  : false
                    ]
                )}}
            </div>
        </div>
        <div class="row">
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'first_name',
                        'fieldLabel'                     : 'First Name',
                        'fieldType'                      : 'input',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'First Name',
                        'fieldRequired'                  : true,
                        'fieldBazScan'                   : true,
                        'fieldBazJstreeSearch'           : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldDataInputMinLength'        : 1,
                        'fieldDataInputMaxLength'        : 100,
                        'fieldValue'                     : customerFirstName
                    ]
                )}}
            </div>
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'last_name',
                        'fieldLabel'                     : 'Last Name',
                        'fieldType'                      : 'input',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Last Name',
                        'fieldRequired'                  : true,
                        'fieldBazScan'                   : true,
                        'fieldBazJstreeSearch'           : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldDataInputMinLength'        : 1,
                        'fieldDataInputMaxLength'        : 100,
                        'fieldValue'                     : customerLastName
                    ]
                )}}
            </div>
        </div>
        <div class="row">
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                             : component,
                        'componentName'                         : componentName,
                        'componentId'                           : componentId,
                        'sectionId'                             : sectionId,
                        'fieldId'                               : 'contact_source',
                        'fieldLabel'                            : 'Contact Source',
                        'fieldType'                             : 'select2',
                        'fieldHelp'                             : true,
                        'fieldHelpTooltipContent'               : 'Source where you got the customer information from.',
                        'fieldRequired'                         : false,
                        'fieldBazScan'                          : true,
                        'fieldBazJstreeSearch'                  : true,
                        'fieldBazPostOnCreate'                  : true,
                        'fieldBazPostOnUpdate'                  : true,
                        'fieldDataSelect2Options'               : contactSources,
                        'fieldDataSelect2OptionsKey'            : 'id',
                        'fieldDataSelect2OptionsValue'          : 'name',
                        'fieldDataSelect2OptionsArray'          : true,
                        'fieldDataSelect2OptionsSelected'       : contactSource
                    ]
                )}}
            </div>
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                             : component,
                        'componentName'                         : componentName,
                        'componentId'                           : componentId,
                        'sectionId'                             : sectionId,
                        'fieldId'                               : 'contact_source_details',
                        'fieldLabel'                            : 'Contact Source Details',
                        'fieldHelp'                             : true,
                        'fieldHelpTooltipContent'               : 'Contact source details.',
                        'fieldHidden'                           : false,
                        'fieldType'                             : 'input',
                        'fieldBazScan'                          : true,
                        'fieldBazPostOnCreate'                  : true,
                        'fieldBazPostOnUpdate'                  : true,
                        'fieldValue'                            : contactSourceDetails
                    ]
                )}}
                {{adminltetags.useTag('fields',
                    [
                        'component'                             : component,
                        'componentName'                         : componentName,
                        'componentId'                           : componentId,
                        'sectionId'                             : sectionId,
                        'fieldId'                               : 'contact_referrer_id',
                        'fieldLabel'                            : 'Contact Referrer ID',
                        'fieldHidden'                           : true,
                        'fieldType'                             : 'input',
                        'fieldBazScan'                          : true,
                        'fieldBazPostOnCreate'                  : true,
                        'fieldBazPostOnUpdate'                  : true,
                        'fieldValue'                            : contactReferrerId
                    ]
                )}}
                {{adminltetags.useTag('fields',
                    [
                        'component'                             : component,
                        'componentName'                         : componentName,
                        'componentId'                           : componentId,
                        'sectionId'                             : sectionId,
                        'fieldId'                               : 'referrer_full_name',
                        'fieldLabel'                            : 'Contact Referrer',
                        'fieldType'                             : 'input',
                        'fieldPlaceholder'                      : 'Search Contact',
                        'fieldHelp'                             : true,
                        'fieldHelpTooltipContent'               : 'Search Contact.',
                        'fieldBazScan'                          : true,
                        'fieldBazJstreeSearch'                  : true,
                        'fieldBazPostOnCreate'                  : false,
                        'fieldBazPostOnUpdate'                  : false,
                        'fieldRequired'                         : false,
                        'fieldHidden'                           : true,
                        'fieldDataInputMinLength'               : 1,
                        'fieldDataInputMaxLength'               : 100,
                        'fieldValue'                            : contactReferrer
                    ]
                )}}
            </div>
        </div>
    </div>
</div>