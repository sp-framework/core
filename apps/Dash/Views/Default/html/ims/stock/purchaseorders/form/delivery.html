{% if purchaseOrder['id'] is defined %}
    {% set purchaseOrderDeliveryDate = purchaseOrder['delivery_date'] %}
    {% set purchaseOrderDeliveryType = purchaseOrder['delivery_type'] %}
    {% set purchaseOrderDeliveryStreetAddress = purchaseOrder['street_address'] %}
    {% set purchaseOrderDeliveryStreetAddress2 = purchaseOrder['street_address_2'] %}
    {% set purchaseOrderDeliveryCityId = purchaseOrder['city_id'] %}
    {% set purchaseOrderDeliveryCity = purchaseOrder['city_name'] %}
    {% set purchaseOrderDeliveryPostCode = purchaseOrder['post_code'] %}
    {% set purchaseOrderDeliveryStateId = purchaseOrder['state_id'] %}
    {% set purchaseOrderDeliveryState = purchaseOrder['state_name'] %}
    {% set purchaseOrderDeliveryCountryId = purchaseOrder['country_id'] %}
    {% set purchaseOrderDeliveryCountry = purchaseOrder['country_name'] %}
    {% set purchaseOrderDeliveryContactFullname = purchaseOrder['contact_fullname'] %}
    {% set purchaseOrderDeliveryPhone = purchaseOrder['contact_phone'] %}
    {% set purchaseOrderDeliveryInstructions = purchaseOrder['delivery_instructions'] %}
{% else %}
    {% set purchaseOrderDeliveryDate = '' %}
    {% set purchaseOrderDeliveryType = '' %}
    {% set purchaseOrderDeliveryStreetAddress = '' %}
    {% set purchaseOrderDeliveryStreetAddress2 = '' %}
    {% set purchaseOrderDeliveryCityId = '' %}
    {% set purchaseOrderDeliveryCity = '' %}
    {% set purchaseOrderDeliveryPostCode = '' %}
    {% set purchaseOrderDeliveryStateId = '' %}
    {% set purchaseOrderDeliveryState = '' %}
    {% set purchaseOrderDeliveryCountryId = '' %}
    {% set purchaseOrderDeliveryCountry = '' %}
    {% set purchaseOrderDeliveryContactFullname = '' %}
    {% set purchaseOrderDeliveryPhone = '' %}
    {% set purchaseOrderDeliveryInstructions = '' %}
{% endif %}
{% if purchaseOrderDeliveryType == '1' %}
    {% set entityLocationDisabled = false %}
    {% set customerDisabled = true %}
    {% set locationOneoffDetails = '' %}
    {% set customerDetails = 'hidden=""' %}
    {% set locationContactIdDisabled = false %}
    {% set locationContactIdHidden = false %}
    {% set purchaseOrderDeliveryContactFullnameDisabled = true %}
    {% set purchaseOrderDeliveryContactPhoneDisabled = true %}
    {% set purchaseOrderEntityLocationId = purchaseOrder['entity_location_id'] %}
    {% set purchaseOrderLocationAddressId = purchaseOrder['location_address_id'] %}
    {% set purchaseOrderLocationContactId = purchaseOrder['location_contact_id'] %}
    {% set purchaseOrderCustomerId = '' %}
    {% set streetAddressFieldDisabled = true %}
    {% set streetAddress2FieldDisabled = true %}
    {% set cityFieldDisabled = true %}
    {% set postCodeFieldDisabled = true %}
    {% set stateFieldDisabled = true %}
    {% set countryFieldDisabled = true %}
{% elseif purchaseOrderDeliveryType == '2' %}
    {% set entityLocationDisabled = true %}
    {% set customerDisabled = false %}
    {% set locationOneoffDetails = 'hidden=""' %}
    {% set customerDetails = '' %}
    {% set locationContactIdDisabled = true %}
    {% set locationContactIdHidden = true %}
    {% set purchaseOrderDeliveryContactFullnameDisabled = false %}
    {% set purchaseOrderDeliveryContactPhoneDisabled = false %}
    {% set purchaseOrderEntityLocationId = '' %}
    {% set purchaseOrderLocationAddressId = '' %}
    {% set purchaseOrderLocationContactId = '' %}
    {% set purchaseOrderCustomerId = purchaseOrder['customer_id'] %}
    {% set streetAddressFieldDisabled = true %}
    {% set streetAddress2FieldDisabled = true %}
    {% set cityFieldDisabled = true %}
    {% set postCodeFieldDisabled = true %}
    {% set stateFieldDisabled = true %}
    {% set countryFieldDisabled = true %}
{% elseif purchaseOrderDeliveryType == '3' %}
    {% set entityLocationDisabled = true %}
    {% set customerDisabled = true %}
    {% set locationOneoffDetails = '' %}
    {% set customerDetails = 'hidden=""' %}
    {% set locationContactIdDisabled = true %}
    {% set locationContactIdHidden = true %}
    {% set purchaseOrderDeliveryContactFullnameDisabled = false %}
    {% set purchaseOrderDeliveryContactPhoneDisabled = false %}
    {% set purchaseOrderEntityLocationId = '' %}
    {% set purchaseOrderLocationAddressId = '' %}
    {% set purchaseOrderLocationContactId = '' %}
    {% set purchaseOrderCustomerId = '' %}
    {% set streetAddressFieldDisabled = false %}
    {% set streetAddress2FieldDisabled = false %}
    {% set cityFieldDisabled = false %}
    {% set postCodeFieldDisabled = false %}
    {% set stateFieldDisabled = false %}
    {% set countryFieldDisabled = false %}
{% else %}
    {% set entityLocationDisabled = true %}
    {% set customerDisabled = true %}
    {% set locationOneoffDetails = '' %}
    {% set customerDetails = 'hidden=""' %}
    {% set locationContactIdDisabled = true %}
    {% set locationContactIdHidden = true %}
    {% set purchaseOrderDeliveryContactFullnameDisabled = true %}
    {% set purchaseOrderDeliveryContactPhoneDisabled = true %}
    {% set purchaseOrderEntityLocationId = '' %}
    {% set purchaseOrderLocationAddressId = '' %}
    {% set purchaseOrderLocationContactId = '' %}
    {% set purchaseOrderCustomerId = '' %}
    {% set streetAddressFieldDisabled = true %}
    {% set streetAddress2FieldDisabled = true %}
    {% set cityFieldDisabled = true %}
    {% set postCodeFieldDisabled = true %}
    {% set stateFieldDisabled = true %}
    {% set countryFieldDisabled = true %}
{% endif %}
<div class="row">
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                      : component,
                'componentName'                  : componentName,
                'componentId'                    : componentId,
                'sectionId'                      : sectionId,
                'fieldId'                        : 'delivery_date',
                'fieldLabel'                     : 'Expected Delivery Date',
                'fieldType'                      : 'flatpickr',
                'fieldHelp'                      : true,
                'fieldHelpTooltipContent'        : 'Expected delivery date for the purchase order.',
                'fieldFlatpickrClearButton'      : true,
                'fieldRequired'                  : false,
                'fieldBazScan'                   : true,
                'fieldBazJstreeSearch'           : true,
                'fieldBazPostOnCreate'           : true,
                'fieldBazPostOnUpdate'           : true,
                'fieldDataInputMinLength'        : 1,
                'fieldDataInputMaxLength'        : 10,
                'fieldValue'                     : purchaseOrderDeliveryDate
            ]
        )}}
    </div>
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                            : component,
                'componentName'                        : componentName,
                'componentId'                          : componentId,
                'sectionId'                            : sectionId,
                'fieldId'                              : 'delivery_type',
                'fieldLabel'                           : 'Delivery Type',
                'fieldType'                            : 'select2',
                'fieldHelp'                            : true,
                'fieldHelpTooltipContent'              : 'Select a delivery type of the purchase order.',
                'fieldRequired'                        : true,
                'fieldBazScan'                         : true,
                'fieldBazPostOnCreate'                 : true,
                'fieldBazPostOnUpdate'                 : true,
                'fieldBazJstreeSearch'                 : true,
                'fieldDataSelect2Options'              :
                    [
                        '1'     : [
                            'id'    : '1',
                            'name'  : 'TO ENTITY LOCATION'
                        ],
                        '2'     : [
                            'id'    : '2',
                            'name'  : 'DROPSHIP TO CUSTOMER'
                        ],
                        '3'     : [
                            'id'    : '3',
                            'name'  : 'ONE-OFF DELIVERY'
                        ]
                    ],
                'fieldDataSelect2OptionsKey'           : 'id',
                'fieldDataSelect2OptionsValue'         : 'name',
                'fieldDataSelect2OptionsArray'         : true,
                'fieldDataSelect2OptionsSelected'      : purchaseOrderDeliveryType
            ]
        )}}
    </div>
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                                 : component,
                'componentName'                             : componentName,
                'componentId'                               : componentId,
                'sectionId'                                 : sectionId,
                'fieldId'                                   : 'entity_location_id',
                'fieldLabel'                                : 'Entity Location',
                'fieldType'                                 : 'select2',
                'fieldHelp'                                 : true,
                'fieldHelpTooltipContent'                   : "Location of the selected entity",
                'fieldRequired'                             : true,
                'fieldDisabled'                             : entityLocationDisabled,
                'fieldBazScan'                              : true,
                'fieldBazJstreeSearch'                      : true,
                'fieldBazPostOnCreate'                      : true,
                'fieldBazPostOnUpdate'                      : true,
                'fieldDataSelect2Options'                   : locations,
                'fieldDataSelect2OptionsKey'                : 'id',
                'fieldDataSelect2OptionsValue'              : 'name',
                'fieldDataSelect2OptionsArray'              : true,
                'fieldDataSelect2OptionsSelected'           : purchaseOrderEntityLocationId
            ]
        )}}
        {{adminltetags.useTag('fields',
            [
                'component'                                 : component,
                'componentName'                             : componentName,
                'componentId'                               : componentId,
                'sectionId'                                 : sectionId,
                'fieldId'                                   : 'location_address_id',
                'fieldLabel'                                : 'Location Address',
                'fieldType'                                 : 'input',
                'fieldHelp'                                 : true,
                'fieldDisabled'                             : true,
                'fieldHidden'                               : true,
                'fieldHelpTooltipContent'                   : 'Location Address',
                'fieldRequired'                             : true,
                'fieldBazScan'                              : true,
                'fieldBazJstreeSearch'                      : true,
                'fieldBazPostOnCreate'                      : true,
                'fieldBazPostOnUpdate'                      : true,
                'fieldValue'                                : purchaseOrderLocationAddressId
            ]
        )}}
    </div>
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                                 : component,
                'componentName'                             : componentName,
                'componentId'                               : componentId,
                'sectionId'                                 : sectionId,
                'fieldId'                                   : 'customer_id',
                'fieldLabel'                                : 'Customer',
                'fieldType'                                 : 'select2',
                'fieldHelp'                                 : true,
                'fieldHelpTooltipContent'                   : "Customer to dropship the purchase order",
                'fieldRequired'                             : true,
                'fieldDisabled'                             : customerDisabled,
                'fieldBazScan'                              : true,
                'fieldBazJstreeSearch'                      : true,
                'fieldBazPostOnCreate'                      : true,
                'fieldBazPostOnUpdate'                      : true,
                'fieldDataSelect2Options'                   : purchaseOrder['customer'],
                'fieldDataSelect2OptionsKey'                : 'id',
                'fieldDataSelect2OptionsValue'              : 'full_name',
                'fieldDataSelect2OptionsArray'              : true,
                'fieldDataSelect2OptionsSelected'           : purchaseOrderCustomerId
            ]
        )}}
    </div>
</div>
<hr>
<div class="row vdivide">
    <div class="col" id="{{componentId}}-{{sectionId}}-location_oneoff_details" {{locationOneoffDetails}}>
        <div class="row">
            <div class="col-md-12 col-sm-12">
                {{adminltetags.useTag('addresses',
                    [
                        'component'                                   : component,
                        'componentName'                               : componentName,
                        'componentId'                                 : componentId,
                        'sectionId'                                   : sectionId,
                        'addressFieldType'                            : 'single',
                        'includeStreet'                               : true,
                        'searchType'                                  : 'city',
                        'streetAddress'                               : purchaseOrderDeliveryStreetAddress,
                        'streetAddressFieldRequired'                  : true,
                        'streetAddressFieldDisabled'                  : streetAddressFieldDisabled,
                        'streetAddressFieldBazPostOnCreate'           : true,
                        'streetAddressFieldBazPostOnUpdate'           : true,
                        'streetAddress2'                              : purchaseOrderDeliveryStreetAddress2,
                        'streetAddress2FieldBazPostOnCreate'          : true,
                        'streetAddress2FieldBazPostOnUpdate'          : true,
                        'streetAddress2FieldDisabled'                 : streetAddress2FieldDisabled,
                        'cityId'                                      : purchaseOrderDeliveryCityId,
                        'cityName'                                    : purchaseOrderDeliveryCity,
                        'cityFieldRequired'                           : true,
                        'cityFieldDisabled'                           : cityFieldDisabled,
                        'cityFieldBazPostOnCreate'                    : true,
                        'cityFieldBazPostOnUpdate'                    : true,
                        'postCode'                                    : purchaseOrderDeliveryPostCode,
                        'postCodeFieldRequired'                       : true,
                        'postCodeFieldDisabled'                       : postCodeFieldDisabled,
                        'postCodeFieldBazPostOnCreate'                : true,
                        'postCodeFieldBazPostOnUpdate'                : true,
                        'stateId'                                     : purchaseOrderDeliveryStateId,
                        'stateName'                                   : purchaseOrderDeliveryState,
                        'stateFieldRequired'                          : true,
                        'stateFieldDisabled'                          : stateFieldDisabled,
                        'stateFieldBazPostOnCreate'                   : true,
                        'stateFieldBazPostOnUpdate'                   : true,
                        'countryId'                                   : purchaseOrderDeliveryCountryId,
                        'countryName'                                 : purchaseOrderDeliveryCountry,
                        'countryFieldRequired'                        : true,
                        'countryFieldDisabled'                        : countryFieldDisabled,
                        'countryFieldBazPostOnCreate'                 : true,
                        'countryFieldBazPostOnUpdate'                 : true
                    ]
                )}}
            </div>
        </div>
    </div>
    <div class="col" id="{{componentId}}-{{sectionId}}-customer_details" {{customerDetails}}>
        
        {% if purchaseOrder['customer_addresses'] is defined and purchaseOrder['customer_addresses']|length > 0 %}
            {% set customerAddresses = '' %}
            {% for customerAddress in purchaseOrder['customer_addresses'] %}
                {% if customerAddress['id'] == purchaseOrder['customer_address_id'] %}
                    {% set addressChecked = 'checked=""' %}
                {% else %}
                    {% set addressChecked = '' %}
                {% endif %}
                {% set addressContent =
                    '<dl class="row mb-0">
                        <dt class="col-sm-4">Street Address</dt>
                        <dd class="col-sm-8 cla-street mb-0">' ~ customerAddress['street_address'] ~ '</dd>
                        <dt class="col-sm-4">Street Address 2</dt>
                        <dd class="col-sm-8 cla-street2 mb-0">' ~ customerAddress['street_address_2'] ~ '</dd>
                        <dt class="col-sm-4">City</dt>
                        <dd class="col-sm-8 cla-city mb-0">' ~ customerAddress['city_name'] ~ '</dd>
                        <dt class="col-sm-4">Post Code</dt>
                        <dd class="col-sm-8 cla-postcode mb-0">' ~ customerAddress['post_code'] ~ '</dd>
                        <dt class="col-sm-4">State</dt>
                        <dd class="col-sm-8 cla-state mb-0">' ~ customerAddress['state_name'] ~ '</dd>
                        <dt class="col-sm-4">Country</dt>
                        <dd class="col-sm-8 cla-country mb-0">' ~ customerAddress['country_name'] ~ '</dd>
                    </dl>'
                %}
                {% set customerAddresses = customerAddresses ~
                    '<div class="info-box">
                        <div class="info-box-content">
                            <div class="row">
                                <div class="col-md-1">
                                    <div class="icheck-primary">
                                        <input type="radio" id="' ~ customerAddress['id'] ~ '" data-value="' ~ customerAddress['id'] ~ '" name="' ~ componentId ~ '-' ~ sectionId ~ '-customer-addresses" ' ~ addressChecked ~ '>
                                        <label for="' ~ customerAddress['id'] ~ '"></label>
                                    </div>
                                </div>
                                <div class="col">' ~ addressContent ~ '</div>
                            </div>
                        </div>
                    </div>'
                %}
            {% endfor %}
            {% set customerAddressesHidden = false %}
        {% else %}
            {% set customerAddresses = '' %}
            {% set customerAddressesHidden = true %}
        {% endif %}
        
        {{adminltetags.useTag('fields',
            [
                'component'                      : component,
                'componentName'                  : componentName,
                'componentId'                    : componentId,
                'sectionId'                      : sectionId,
                'fieldId'                        : 'customer_address_id',
                'fieldLabel'                     : 'Customer Shipping Address',
                'fieldType'                      : 'html',
                'fieldHelp'                      : true,
                'fieldHelpTooltipContent'        : 'Select an address from the given addresses for this customer.',
                'fieldAdditionalClass'           : 'mb-0',
                'fieldHidden'                    : customerAddressesHidden,
                'fieldHtmlContent'               : customerAddresses,
                'fieldBazScan'                   : true,
                'fieldBazJstreeSearch'           : true,
                'fieldBazPostOnCreate'           : true,
                'fieldBazPostOnUpdate'           : true
            ]
        )}}
        {{adminltetags.useTag('fields',
            [
                'component'                      : component,
                'componentName'                  : componentName,
                'componentId'                    : componentId,
                'sectionId'                      : sectionId,
                'fieldId'                        : 'customer_address_id_error',
                'fieldLabel'                     : 'Address Error',
                'fieldType'                      : 'html',
                'fieldAdditionalClass'           : 'mb-0',
                'fieldHidden'                    : true,
                'fieldBazScan'                   : false,
                'fieldBazJstreeSearch'           : false,
                'fieldBazPostOnCreate'           : false,
                'fieldBazPostOnUpdate'           : false
            ]
        )}}
    </div>
    <div class="col">
        <div class="row">
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                            : component,
                        'componentName'                        : componentName,
                        'componentId'                          : componentId,
                        'sectionId'                            : sectionId,
                        'fieldId'                              : 'location_contact_id',
                        'fieldLabel'                           : 'Location Contacts',
                        'fieldType'                            : 'select2',
                        'fieldHelp'                            : true,
                        'fieldHelpTooltipContent'              : 'Select a contact for this location.',
                        'fieldRequired'                        : true,
                        'fieldHidden'                          : locationContactIdHidden,
                        'fieldDisabled'                        : locationContactIdDisabled,
                        'fieldBazScan'                         : true,
                        'fieldBazPostOnCreate'                 : true,
                        'fieldBazPostOnUpdate'                 : true,
                        'fieldBazJstreeSearch'                 : false,
                        'fieldDataSelect2Options'              : employees,
                        'fieldDataSelect2OptionsKey'           : 'id',
                        'fieldDataSelect2OptionsValue'         : 'full_name',
                        'fieldDataSelect2OptionsArray'         : true,
                        'fieldDataSelect2OptionsSelected'      : purchaseOrderLocationContactId
                    ]
                )}}
            </div>
        </div>
        <div class="row">
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                             : component,
                        'componentName'                         : componentName,
                        'componentId'                           : componentId,
                        'sectionId'                             : sectionId,
                        'fieldId'                               : 'contact_fullname',
                        'fieldLabel'                            : 'Contact Name',
                        'fieldType'                             : 'input',
                        'fieldHelp'                             : true,
                        'fieldDisabled'                         : purchaseOrderDeliveryContactFullnameDisabled,
                        'fieldHelpTooltipContent'               : 'Contact Full Name',
                        'fieldRequired'                         : true,
                        'fieldBazScan'                          : true,
                        'fieldBazJstreeSearch'                  : true,
                        'fieldBazPostOnCreate'                  : true,
                        'fieldBazPostOnUpdate'                  : true,
                        'fieldDataInputMinLength'               : 1,
                        'fieldDataInputMaxLength'               : 50,
                        'fieldValue'                            : purchaseOrderDeliveryContactFullname
                    ]
                )}}
            </div>
        </div>
        <div class="row">
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                             : component,
                        'componentName'                         : componentName,
                        'componentId'                           : componentId,
                        'sectionId'                             : sectionId,
                        'fieldId'                               : 'contact_phone',
                        'fieldLabel'                            : 'Contact Phone',
                        'fieldType'                             : 'input',
                        'fieldHelp'                             : true,
                        'fieldDisabled'                         : purchaseOrderDeliveryContactPhoneDisabled,
                        'fieldHelpTooltipContent'               : 'Contact Phone number',
                        'fieldRequired'                         : true,
                        'fieldBazScan'                          : true,
                        'fieldBazJstreeSearch'                  : true,
                        'fieldBazPostOnCreate'                  : true,
                        'fieldBazPostOnUpdate'                  : true,
                        'fieldDataInputMinLength'               : 1,
                        'fieldDataInputMaxLength'               : 20,
                        'fieldValue'                            : purchaseOrderDeliveryPhone
                    ]
                )}}
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col">
        {{adminltetags.useTag('fields',
            [
                'component'                      : component,
                'componentName'                  : componentName,
                'componentId'                    : componentId,
                'sectionId'                      : sectionId,
                'fieldId'                        : 'delivery_instructions',
                'fieldLabel'                     : 'Delivery Instructions',
                'fieldType'                      : 'textarea',
                'fieldHelp'                      : true,
                'fieldDisabled'                  : false,
                'fieldHelpTooltipContent'        : 'Delivery Instructions',
                'fieldRequired'                  : false,
                'fieldBazScan'                   : true,
                'fieldBazJstreeSearch'           : true,
                'fieldBazPostOnCreate'           : true,
                'fieldBazPostOnUpdate'           : true,
                'fieldDataInputMinLength'        : 1,
                'fieldDataInputMaxLength'        : 2048,
                'fieldTextareaRows'              : 2,
                'fieldValue'                     : purchaseOrderDeliveryInstructions
            ]
        )}}
    </div>
</div>