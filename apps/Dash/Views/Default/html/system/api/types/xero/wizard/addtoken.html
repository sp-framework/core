<div class="row">
    <div class="col">
        <h2>XERO AUTHORIZATION CONFIRMATION</h2>
        {% if responseCode == 1 %}
            <div class="alert alert-danger alert-dismissible">
                <h5><i class="icon fas fa-ban"></i> Error!</h5>
                Error Message: {{responseMessage}} Please try Again.
            </div>
            <div class="text-center mt-2">
                <button type="button" id="try-again" class="btn btn-primary btn-sm">Try Again</button>
            </div>
        {% else %}
            <div class="alert alert-success alert-dismissible">
                <h5><i class="icon fas fa-check"></i> Authorized!</h5>
                {{responseMessage}}
            </div>
            <div class="text-center mt-2">
                <button type="button" id="close" class="btn btn-primary btn-sm">CLICK TO CONTINUE...</button>
            </div>
        {% endif %}
    </div>
</div>
<script>
$('#close').click(function(e) {
    e.preventDefault();
    goBack('xero-api-success');
});
$('#try-again').click(function(e) {
    e.preventDefault();
    goBack('xero-api-error');
});

var tokenData = { };
tokenData['tokenKey'] = $('#security-token').attr('name');
tokenData['token'] = $('#security-token').val();

function goBack(message) {
    var goBack = window.open('', window.opener.name);
    window.opener.$('body').trigger(message, tokenData);
    window.close();
    goBack.focus();
}
</script>