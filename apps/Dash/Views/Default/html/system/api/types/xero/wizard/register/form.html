{% if api['id'] is defined %}
    {% set apiId = api['id'] %}
    {% set apiSetup = api['setup'] %}
    {% set apiName = api['name'] %}
    {% set apiInUse = api['in_use'] %}
    {% set apiUsedBy = api['used_by'] %}
    {% set apiDescription = api['description'] %}
    {% set api['refresh_token_valid_until'] = date('m/d/Y H:i:s', api['refresh_token_valid_until']) %}
    {% set apiTenantId = api['tenant_id'] %}
    {% set apiTenantType = api['tenant_type'] %}
    {% set apiTenantAuthEventId = api['auth_event_id'] %}
    {% set apiTenantName = api['tenant_name'] %}
    {% set apiUseSystemsCredentials = api['use_systems_credentials'] %}
    {% set apiUserCredentialsClientId = api['user_credentials_client_id'] %}
    {% set apiUserCredentialsClientSecret = api['user_credentials_client_secret'] %}
    {% set apiUserCredentialsRedirectUri = api['user_credentials_redirect_uri'] %}
    {% set apiUserCredentialsScopes = api['user_credentials_scopes'] %}
{% else %}
    {% set apiId = '' %}
    {% set apiSetup = '' %}
    {% set apiName = '' %}
    {% set apiInUse = '0' %}
    {% set apiUsedBy = '' %}
    {% set apiDescription = '' %}
    {% set apiTenantId = '' %}
    {% set apiTenantType = '' %}
    {% set apiTenantAuthEventId = '' %}
    {% set apiTenantName = '' %}
    {% set apiUseSystemsCredentials = '1' %}
    {% set apiUserCredentialsClientId = '' %}
    {% set apiUserCredentialsClientSecret = '' %}
    {% set apiUserCredentialsRedirectUri = '' %}
    {% set apiUserCredentialsScopes = '' %}
{% endif %}
<form data-validateon="section" id="{{componentId}}-{{sectionId}}-form">
    <fieldset id="{{componentId}}-{{sectionId}}-fieldset">
        {% if selectOrg is not defined %}
            {% include 'api/types/common.html' %}
            <div class="row">
                <div class="col">
                    {% if apiUseSystemsCredentials == 1 %}
                        {% set systemsCredentialsChecked = true %}
                    {% else %}
                        {% set systemsCredentialsChecked = false %}
                    {% endif %}
                    {{adminltetags.useTag('fields',
                        [
                            'component'                      : component,
                            'componentName'                  : componentName,
                            'componentId'                    : componentId,
                            'sectionId'                      : sectionId,
                            'fieldId'                        : 'use_systems_credentials',
                            'fieldLabel'                     : 'Use Systems Credentials?',
                            'fieldHelp'                      : true,
                            'fieldHelpTooltipContent'        : 'Either you can use our (systems) credentials that are already registered with this system or you can grab new credentials from Xero developer program.',
                            'fieldRequired'                  : false,
                            'fieldType'                      : 'checkbox',
                            'fieldCheckboxType'              : 'primary',
                            'fieldCheckboxChecked'           : systemsCredentialsChecked,
                            'fieldBazPostOnCreate'           : true,
                            'fieldBazPostOnUpdate'           : true,
                            'fieldBazScan'                   : true
                        ]
                    )}}
                </div>
                {% if wizard is not defined %}
                    <div class="col">
                        {{adminltetags.useTag('fields',
                            [
                                'component'                      : component,
                                'componentName'                  : componentName,
                                'componentId'                    : componentId,
                                'sectionId'                      : sectionId,
                                'fieldId'                        : 'tenant_id',
                                'fieldLabel'                     : 'Tenant Id',
                                'fieldType'                      : 'input',
                                'fieldHelp'                      : true,
                                'fieldHelpTooltipContent'        : 'Tenant Id received from Xero dev program',
                                'fieldRequired'                  : true,
                                'fieldBazScan'                   : true,
                                'fieldBazPostOnCreate'           : true,
                                'fieldBazPostOnUpdate'           : true,
                                'fieldDataInputMinLength'        : 1,
                                'fieldDataInputMaxLength'        : 512,
                                'fieldDisabled'                  : true,
                                'fieldHidden'                    : true,
                                'fieldValue'                     : apiTenantId
                            ]
                        )}}
                        {{adminltetags.useTag('fields',
                            [
                                'component'                      : component,
                                'componentName'                  : componentName,
                                'componentId'                    : componentId,
                                'sectionId'                      : sectionId,
                                'fieldId'                        : 'tenant_type',
                                'fieldLabel'                     : 'Tenant type',
                                'fieldType'                      : 'input',
                                'fieldHelp'                      : true,
                                'fieldHelpTooltipContent'        : 'Tenant type received from Xero dev program',
                                'fieldRequired'                  : true,
                                'fieldBazScan'                   : true,
                                'fieldBazPostOnCreate'           : true,
                                'fieldBazPostOnUpdate'           : true,
                                'fieldDataInputMinLength'        : 1,
                                'fieldDataInputMaxLength'        : 512,
                                'fieldDisabled'                  : true,
                                'fieldHidden'                    : true,
                                'fieldValue'                     : apiTenantType
                            ]
                        )}}
                        {{adminltetags.useTag('fields',
                            [
                                'component'                      : component,
                                'componentName'                  : componentName,
                                'componentId'                    : componentId,
                                'sectionId'                      : sectionId,
                                'fieldId'                        : 'auth_event_id',
                                'fieldLabel'                     : 'Auth Event Id',
                                'fieldType'                      : 'input',
                                'fieldHelp'                      : true,
                                'fieldHelpTooltipContent'        : 'Auth Event Id received from Xero dev program',
                                'fieldRequired'                  : true,
                                'fieldBazScan'                   : true,
                                'fieldBazPostOnCreate'           : true,
                                'fieldBazPostOnUpdate'           : true,
                                'fieldDataInputMinLength'        : 1,
                                'fieldDataInputMaxLength'        : 512,
                                'fieldDisabled'                  : true,
                                'fieldHidden'                    : true,
                                'fieldValue'                     : apiTenantAuthEventId
                            ]
                        )}}
                        {{adminltetags.useTag('fields',
                            [
                                'component'                      : component,
                                'componentName'                  : componentName,
                                'componentId'                    : componentId,
                                'sectionId'                      : sectionId,
                                'fieldId'                        : 'tenant_name',
                                'fieldLabel'                     : 'Organisation',
                                'fieldType'                      : 'input',
                                'fieldHelp'                      : true,
                                'fieldHelpTooltipContent'        : 'Tenant name received from Xero dev program',
                                'fieldRequired'                  : true,
                                'fieldBazScan'                   : true,
                                'fieldBazPostOnCreate'           : true,
                                'fieldBazPostOnUpdate'           : true,
                                'fieldDataInputMinLength'        : 1,
                                'fieldDataInputMaxLength'        : 512,
                                'fieldDisabled'                  : true,
                                'fieldHidden'                    : false,
                                'fieldValue'                     : apiTenantName
                            ]
                        )}}
                    </div>
                    <div class="col">
                        {{adminltetags.useTag('fields',
                            [
                                'component'                      : component,
                                'componentName'                  : componentName,
                                'componentId'                    : componentId,
                                'sectionId'                      : sectionId,
                                'fieldId'                        : 'refresh_token',
                                'fieldLabel'                     : 'Refresh Token on update?',
                                'fieldHelp'                      : true,
                                'fieldHelpTooltipContent'        : 'If you are making any changes to api parameters, check this to run refresh token wizard',
                                'fieldRequired'                  : false,
                                'fieldType'                      : 'checkbox',
                                'fieldCheckboxType'              : 'info',
                                'fieldCheckboxChecked'           : false,
                                'fieldBazPostOnCreate'           : false,
                                'fieldBazPostOnUpdate'           : false,
                                'fieldBazScan'                   : true
                            ]
                        )}}
                    </div>
                {% endif %}
            </div>
            <div class="row" id="{{componentId}}-{{sectionId}}-user-credentials">
                <div class="col">
                    <div class="row">
                        <div class="col">
                            {{adminltetags.useTag('fields',
                                [
                                    'component'                      : component,
                                    'componentName'                  : componentName,
                                    'componentId'                    : componentId,
                                    'sectionId'                      : sectionId,
                                    'fieldId'                        : 'user_credentials_client_id',
                                    'fieldLabel'                     : 'Client Id',
                                    'fieldType'                      : 'input',
                                    'fieldHelp'                      : true,
                                    'fieldHelpTooltipContent'        : 'Client Id received from Xero dev program',
                                    'fieldRequired'                  : true,
                                    'fieldBazScan'                   : true,
                                    'fieldBazPostOnCreate'           : true,
                                    'fieldBazPostOnUpdate'           : true,
                                    'fieldDataInputMinLength'        : 1,
                                    'fieldDataInputMaxLength'        : 512,
                                    'fieldDisabled'                  : false,
                                    'fieldValue'                     : apiUserCredentialsClientId
                                ]
                            )}}
                        </div>
                        <div class="col">
                            {{adminltetags.useTag('fields',
                                [
                                    'component'                      : component,
                                    'componentName'                  : componentName,
                                    'componentId'                    : componentId,
                                    'sectionId'                      : sectionId,
                                    'fieldId'                        : 'user_credentials_client_secret',
                                    'fieldLabel'                     : 'Client Secret',
                                    'fieldType'                      : 'input',
                                    'fieldHelp'                      : true,
                                    'fieldHelpTooltipContent'        : 'Client Secret received from Xero dev program',
                                    'fieldRequired'                  : true,
                                    'fieldBazScan'                   : true,
                                    'fieldBazPostOnCreate'           : true,
                                    'fieldBazPostOnUpdate'           : true,
                                    'fieldDataInputMinLength'        : 1,
                                    'fieldDataInputMaxLength'        : 512,
                                    'fieldDisabled'                  : false,
                                    'fieldValue'                     : apiUserCredentialsClientSecret
                                ]
                            )}}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            {{adminltetags.useTag('fields',
                                [
                                    'component'                      : component,
                                    'componentName'                  : componentName,
                                    'componentId'                    : componentId,
                                    'sectionId'                      : sectionId,
                                    'fieldId'                        : 'user_credentials_redirect_uri',
                                    'fieldLabel'                     : 'Redirect Uri',
                                    'fieldType'                      : 'input',
                                    'fieldHelp'                      : true,
                                    'fieldHelpTooltipContent'        : 'Redirect Uri received from Xero dev program',
                                    'fieldRequired'                  : true,
                                    'fieldBazScan'                   : true,
                                    'fieldBazPostOnCreate'           : true,
                                    'fieldBazPostOnUpdate'           : true,
                                    'fieldDataInputMinLength'        : 1,
                                    'fieldDataInputMaxLength'        : 1024,
                                    'fieldDisabled'                  : false,
                                    'fieldValue'                     : apiUserCredentialsRedirectUri
                                ]
                            )}}
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="row">
                        <div class="col">
                            {{adminltetags.useTag('fields',
                                [
                                    'component'                      : component,
                                    'componentName'                  : componentName,
                                    'componentId'                    : componentId,
                                    'sectionId'                      : sectionId,
                                    'fieldId'                        : 'user_credentials_scopes',
                                    'fieldLabel'                     : 'Scopes (comma separated)',
                                    'fieldType'                      : 'textarea',
                                    'fieldDataMaxLength'             : 2048,
                                    'fieldHelp'                      : true,
                                    'fieldHelpTooltipContent'        : 'Scopes received from Xero dev program. NOTE: Enter each scope comma separated',
                                    'fieldRequired'                  : false,
                                    'fieldBazScan'                   : true,
                                    'fieldRequired'                  : true,
                                    'fieldBazPostOnCreate'           : true,
                                    'fieldBazPostOnUpdate'           : true,
                                    'fieldDataInputMaxLength'        : 2048,
                                    'fieldTextareaRows'              : 4,
                                    'fieldValue'                     : apiUserCredentialsScopes
                                ]
                            )}}
                        </div>
                    </div>
                </div>
            </div>
        {% elseif selectOrg is defined and selectOrg === true %}
            <div class="row">
                <div class="col">
                    {{adminltetags.useTag('fields',
                        [
                            'component'                      : component,
                            'componentName'                  : componentName,
                            'componentId'                    : componentId,
                            'sectionId'                      : sectionId,
                            'fieldId'                        : 'tenant_id',
                            'fieldLabel'                     : 'Organisation',
                            'fieldType'                      : 'select2',
                            'fieldHelp'                      : true,
                            'fieldHelpTooltipContent'        : 'Select Xero organisation.',
                            'fieldBazScan'                   : true,
                            'fieldBazPostOnCreate'           : true,
                            'fieldBazPostOnUpdate'           : true,
                            'fieldRequired'                  : true,
                            'fieldDataSelect2Options'        : [],
                            'fieldDataSelect2OptionsKey'     : 'id',
                            'fieldDataSelect2OptionsValue'   : 'name',
                            'fieldDataSelect2OptionsArray'   : true,
                            'fieldDataSelect2OptionsSelected': ''
                        ]
                    )}}
                    {{adminltetags.useTag('fields',
                        [
                            'component'                      : component,
                            'componentName'                  : componentName,
                            'componentId'                    : componentId,
                            'sectionId'                      : sectionId,
                            'fieldId'                        : 'tenant_type',
                            'fieldLabel'                     : 'Tenant type',
                            'fieldType'                      : 'input',
                            'fieldHelp'                      : true,
                            'fieldHelpTooltipContent'        : 'Tenant type received from Xero dev program',
                            'fieldRequired'                  : true,
                            'fieldBazScan'                   : true,
                            'fieldBazPostOnCreate'           : true,
                            'fieldBazPostOnUpdate'           : true,
                            'fieldDataInputMinLength'        : 1,
                            'fieldDataInputMaxLength'        : 512,
                            'fieldDisabled'                  : true,
                            'fieldHidden'                    : true,
                            'fieldValue'                     : ''
                        ]
                    )}}
                    {{adminltetags.useTag('fields',
                        [
                            'component'                      : component,
                            'componentName'                  : componentName,
                            'componentId'                    : componentId,
                            'sectionId'                      : sectionId,
                            'fieldId'                        : 'auth_event_id',
                            'fieldLabel'                     : 'Auth Event Id',
                            'fieldType'                      : 'input',
                            'fieldHelp'                      : true,
                            'fieldHelpTooltipContent'        : 'Auth Event Id received from Xero dev program',
                            'fieldRequired'                  : true,
                            'fieldBazScan'                   : true,
                            'fieldBazPostOnCreate'           : true,
                            'fieldBazPostOnUpdate'           : true,
                            'fieldDataInputMinLength'        : 1,
                            'fieldDataInputMaxLength'        : 512,
                            'fieldDisabled'                  : true,
                            'fieldHidden'                    : true,
                            'fieldValue'                     : ''
                        ]
                    )}}
                    {{adminltetags.useTag('fields',
                        [
                            'component'                      : component,
                            'componentName'                  : componentName,
                            'componentId'                    : componentId,
                            'sectionId'                      : sectionId,
                            'fieldId'                        : 'tenant_name',
                            'fieldLabel'                     : 'Organisation',
                            'fieldType'                      : 'input',
                            'fieldHelp'                      : true,
                            'fieldHelpTooltipContent'        : 'Tenant name received from Xero dev program',
                            'fieldRequired'                  : true,
                            'fieldBazScan'                   : true,
                            'fieldBazPostOnCreate'           : true,
                            'fieldBazPostOnUpdate'           : true,
                            'fieldDataInputMinLength'        : 1,
                            'fieldDataInputMaxLength'        : 512,
                            'fieldDisabled'                  : true,
                            'fieldHidden'                    : true,
                            'fieldValue'                     : ''
                        ]
                    )}}
                </div>
            </div>
        {% endif %}
        {% if wizard is not defined and selectOrg is not defined %}
            <hr>
            <div class="row">
                <div class="col">
                    {{adminltetags.useTag('buttons',
                        [
                            'componentId'           : componentId,
                            'sectionId'             : sectionId,
                            'buttonType'            : 'button',
                            'buttons'               :
                                [
                                    'check-autho' : [
                                        'title'                   : 'Check Authorization',
                                        'size'                    : 'sm',
                                        'type'                    : 'primary',
                                        'iconHidden'              : true,
                                        'icon'                    : 'cog fa-spin'
                                    ]
                                ]
                        ]
                    )}}
                </div>
                <div class="col">
                    {{adminltetags.useTag('buttons',
                        [
                            'componentId'           : componentId,
                            'sectionId'             : sectionId,
                            'buttonType'            : 'button',
                            'buttons'               :
                                [
                                    'check-call-stats' : [
                                        'title'                   : 'Check Call Stats',
                                        'size'                    : 'sm',
                                        'type'                    : 'primary',
                                        'iconHidden'              : true,
                                        'icon'                    : 'cog fa-spin'
                                    ]
                                ]
                        ]
                    )}}
                </div>
            </div>
            <hr>
            <div class="row" id="{{componentId}}-{{sectionId}}-autho-data">
                <div class="col">
                    <div class="text-uppercase text-center" id="{{componentId}}-{{sectionId}}-autho-data-heading"></div>
                    <div class="table-responsive p-0">
                        <table class="table table-sm table-hover text-nowrap">
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
            <script>
/* globals PNotify */
$('#{{componentId}}-{{sectionId}}-check-autho').click(function() {

    $(this).attr('disabled', true);

    $('#{{componentId}}-{{sectionId}}-check-autho').children().attr('hidden', false);

    var postData = { };
    postData['api_id'] = $('#{{componentId}}-{{sectionId}}-id').val();
    postData[$('#security-token').attr('name')] = $('#security-token').val();

    $.post('{{links.url("system/api/checkXeroAutho")}}', postData, function(data) {
        if ($('#security-token').length === 1) {
            $('#security-token').attr('name', data.tokenKey);
            $('#security-token').val(data.token);
        }

        if (data.responseCode == '0') {
            $('#{{componentId}}-{{sectionId}}-check-autho').children().attr('hidden', true);

            if (data.responseData) {
                var authoData =
                    '<tr>' +
                        '<td>User Authorization Token Valid Till</td>' +
                        '<td>' + data.responseData.user_access_token_valid_until + '</td>' +
                    '</tr>';

                $('#{{componentId}}-{{sectionId}}-autho-data tbody').empty().append(authoData);
                $('#{{componentId}}-{{sectionId}}-autho-data-heading').empty().append(
                    '<h5>AUTHORIZATION DETAILS</h5>'
                );
            }
            $('#{{componentId}}-{{sectionId}}-check-autho').attr('disabled', false);
            $('#{{componentId}}-{{sectionId}}-autho-data').attr('hidden', false);
            $('#{{componentId}}-{{sectionId}}-check-call-stats-data').attr('hidden', true);
        } else {
            $('#{{componentId}}-{{sectionId}}-check-autho').attr('disabled', true);
            $('#{{componentId}}-{{sectionId}}-check-autho').children().attr('hidden', true);

            var apiId = $('#{{componentId}}-{{sectionId}}-id').val();
            $('#{{componentId}}-{{sectionId}}-refresh_token')[0].checked = true;
            $('#{{componentId}}-{{sectionId}}-updateData').attr('href', '{{links.url("system/api/q/id/' + apiId + '")}}');
            $('#{{componentId}}-{{sectionId}}-setup').val('2');
            $('#{{componentId}}-{{sectionId}}-check-autho').attr('disabled', false);
            PNotify.error({
                title   : data.responseMessage,
            });
        }
    }, 'json');
});
</script>
            <div class="row" id="{{componentId}}-{{sectionId}}-check-call-stats-data" hidden>
                <div class="col">
                    <div class="text-uppercase text-center" id="{{componentId}}-{{sectionId}}-check-call-stats-data-heading"></div>
                    <div class="table-responsive p-0">
                        <table class="table table-sm table-hover text-nowrap">
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
            <script>
/* globals PNotify */
$('#{{componentId}}-{{sectionId}}-check-call-stats').click(function() {

    // $(this).attr('disabled', true);

    $('#{{componentId}}-{{sectionId}}-autho-data').attr('hidden', true);
    $('#{{componentId}}-{{sectionId}}-check-call-stats-data').attr('hidden', false);
    $('#{{componentId}}-{{sectionId}}-check-call-stats').children().attr('hidden', false);

    var postData = { };
    postData['api_id'] = $('#{{componentId}}-{{sectionId}}-id').val();
    postData[$('#security-token').attr('name')] = $('#security-token').val();

    $.post('{{links.url("system/api/checkXeroCallStats")}}', postData, function(data) {
        if ($('#security-token').length === 1) {
            $('#security-token').attr('name', data.tokenKey);
            $('#security-token').val(data.token);
        }

        if (data.responseCode == '0') {
            $('#{{componentId}}-{{sectionId}}-check-call-stats').children().attr('hidden', true);

            if (data.responseData) {
                var callData =
                    '<tr>' +
                        '<td>Stats Retrieved at</td>' +
                        '<td>' + data.responseData.timestamp.date + '</td>' +
                    '</tr>';

                    if (data.responseData.callData) {
                        callData +=
                            '<tr>' +
                                '<td>Application Calls Per Minute Limits</td>' +
                                '<td>' +
                                data.responseData.callData.appMinLimit + ' / ' +
                                data.responseData.callData['appMinLimit-remaining'] +
                                '</td>' +
                            '</tr>' +
                            '<tr>' +
                                '<td>Calls Per Minute Limits</td>' +
                                '<td>' +
                                data.responseData.callData.minLimit + ' / ' +
                                data.responseData.callData['minLimit-remaining'] +
                                '</td>' +
                            '</tr>' +
                            '<tr>' +
                                '<td>Calls Per Day Limits</td>' +
                                '<td>' +
                                data.responseData.callData.dayLimit + ' / ' +
                                data.responseData.callData['dayLimit-remaining'] +
                                '</td>' +
                            '</tr>';

                        if (data.responseData.callData['retry-after']) {
                            callData +=
                                '<tr class="text-danger">' +
                                    '<td>API Calls Limit Reached. Please try after: </td>' +
                                    '<td>' +
                                    data.responseData.callData['retry-after'] +
                                    '</td>' +
                                '</tr>';
                        }
                    }

                $('#{{componentId}}-{{sectionId}}-autho-data').attr('hidden', true);
                $('#{{componentId}}-{{sectionId}}-check-call-stats-data').attr('hidden', false);
                $('#{{componentId}}-{{sectionId}}-check-call-stats-data tbody').empty().append(callData);
                $('#{{componentId}}-{{sectionId}}-check-call-stats-data-heading').empty().append(
                    '<h5>API CALL STATS (Limit / Remaining)</h5>'
                );
            }
            $('#{{componentId}}-{{sectionId}}-check-call-stats').attr('disabled', false);
        } else {
            $('#{{componentId}}-{{sectionId}}-check-call-stats').attr('disabled', true);
            $('#{{componentId}}-{{sectionId}}-check-call-stats').children().attr('hidden', true);

            var apiId = $('#{{componentId}}-{{sectionId}}-id').val();
            $('#{{componentId}}-{{sectionId}}-refresh_token')[0].checked = true;
            $('#{{componentId}}-{{sectionId}}-updateData').attr('href', '{{links.url("system/api/q/id/' + apiId + '")}}');
            $('#{{componentId}}-{{sectionId}}-setup').val('2');
            PNotify.error({
                title   : data.responseMessage,
            });
        }
    }, 'json');
});
</script>
        {% endif %}
    </fieldset>
</form>
<script>
/* globals PNotify */
var dataCollectionComponent, dataCollectionSection, dataCollectionSectionForm;

if (!window['dataCollection']['{{componentId}}']) {
    dataCollectionComponent =
        window['dataCollection']['{{componentId}}'] = { };
} else {
    dataCollectionComponent =
        window['dataCollection']['{{componentId}}'];
}
if (!dataCollectionComponent['{{componentId}}-{{sectionId}}']) {
    dataCollectionSection =
        dataCollectionComponent['{{componentId}}-{{sectionId}}'] = { };
} else {
    dataCollectionSection =
        dataCollectionComponent['{{componentId}}-{{sectionId}}'];
}
if (!dataCollectionSection['{{componentId}}-{{sectionId}}-form']) {
    dataCollectionSectionForm =
        dataCollectionSection['{{componentId}}-{{sectionId}}-form'] = { };
} else {
    dataCollectionSectionForm =
        dataCollectionSection['{{componentId}}-{{sectionId}}-form'];
}

dataCollectionSection =
    $.extend(dataCollectionSection, {
        '{{componentId}}-{{sectionId}}-id'                                      : { },
        '{{componentId}}-{{sectionId}}-tenant_id'                               : {
            placeholder: 'SELECT ORGANIZATION'
        },
        '{{componentId}}-{{sectionId}}-tenant_name'                             : { },
        '{{componentId}}-{{sectionId}}-tenant_type'                             : { },
        '{{componentId}}-{{sectionId}}-auth_event_id'                           : { },
        '{{componentId}}-{{sectionId}}-setup'                                   : { },
        '{{componentId}}-{{sectionId}}-name'                                    : { },
        '{{componentId}}-{{sectionId}}-api_type'                                : { },
        '{{componentId}}-{{sectionId}}-in_use'                                  : { },
        '{{componentId}}-{{sectionId}}-used_by'                                 : { },
        '{{componentId}}-{{sectionId}}-description'                             : { },
        '{{componentId}}-{{sectionId}}-use_systems_credentials'                 : {
            afterInit: function() {
                if ($('#{{componentId}}-{{sectionId}}-use_systems_credentials')[0].checked === true) {
                    $('#{{componentId}}-{{sectionId}}-user-credentials').attr('hidden', true);
                }

                $('#{{componentId}}-{{sectionId}}-use_systems_credentials').click(function() {
                    if ($(this)[0].checked === true) {
                        $('#{{componentId}}-{{sectionId}}-user-credentials').attr('hidden', true);
                    } else {
                        $('#{{componentId}}-{{sectionId}}-user-credentials').attr('hidden', false);
                    }
                });
            }
        },
        '{{componentId}}-{{sectionId}}-refresh_token'                           : {
            afterInit: function() {
                var originalUrl = $('#{{componentId}}-{{sectionId}}-updateData').attr('href');
                var apiId = $('#{{componentId}}-{{sectionId}}-id').val();
                var apiSetup = $('#{{componentId}}-{{sectionId}}-setup').val();

                $('#{{componentId}}-{{sectionId}}-refresh_token').click(function() {
                    if ($(this)[0].checked === true) {
                        $('#{{componentId}}-{{sectionId}}-updateData').attr('href', '{{links.url("system/api/q/id/' + apiId + '")}}');
                        $('#{{componentId}}-{{sectionId}}-setup').val('2');
                    } else {
                        $('#{{componentId}}-{{sectionId}}-updateData').attr('href', originalUrl);
                        $('#{{componentId}}-{{sectionId}}-setup').val(apiSetup);
                    }
                });
            }
        },
        '{{componentId}}-{{sectionId}}-user_credentials_client_id'              : { },
        '{{componentId}}-{{sectionId}}-user_credentials_client_secret'          : { },
        '{{componentId}}-{{sectionId}}-user_credentials_redirect_uri'           : { },
        '{{componentId}}-{{sectionId}}-user_credentials_scopes'                 : { },
        '{{componentId}}-{{sectionId}}-form'                                    : {
            rules: {
                '{{componentId}}-{{sectionId}}-name'                            : 'required',
                '{{componentId}}-{{sectionId}}-api_type'                        : 'required',
                '{{componentId}}-{{sectionId}}-user_credentials_client_id'      : 'required',
                '{{componentId}}-{{sectionId}}-user_credentials_client_secret'  : 'required',
                '{{componentId}}-{{sectionId}}-user_credentials_redirect_uri'   : 'required',
                '{{componentId}}-{{sectionId}}-user_credentials_scopes'         : 'required',
            },
            messages: {
                '{{componentId}}-{{sectionId}}-name'                            : 'Please enter api name',
                '{{componentId}}-{{sectionId}}-api_type'                        : 'Please enter api type',
                '{{componentId}}-{{sectionId}}-user_credentials_client_id'      : 'Please enter user client id',
                '{{componentId}}-{{sectionId}}-user_credentials_client_secret'  : 'Please enter user client secret',
                '{{componentId}}-{{sectionId}}-user_credentials_redirect_uri'   : 'Please enter user redirect uri',
                '{{componentId}}-{{sectionId}}-user_credentials_scopes'         : 'Please enter user scopes',
            }
        }
    });
</script>