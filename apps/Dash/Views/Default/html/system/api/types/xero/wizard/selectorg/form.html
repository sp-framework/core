{% if api['id'] is defined %}
    {% set apiId = api['id'] %}
    {% set apiSetup = api['setup'] %}
    {% set apiName = api['name'] %}
    {% set apiInUse = api['in_use'] %}
    {% set apiUsedBy = api['used_by'] %}
    {% set apiDescription = api['description'] %}
    {% set api['refresh_token_valid_until'] = date('m/d/Y H:i:s', api['refresh_token_valid_until']) %}
    {% set apiTenantId = api['tenant_id'] %}
    {% set apiTenantType = api['tenant_type'] %}
    {% set apiTenantAuthEventId = api['auth_event_id'] %}
    {% set apiTenantName = api['tenant_name'] %}
    {% set apiUseSystemsCredentials = api['use_systems_credentials'] %}
    {% set apiUserCredentialsClientId = api['user_credentials_client_id'] %}
    {% set apiUserCredentialsClientSecret = api['user_credentials_client_secret'] %}
    {% set apiUserCredentialsRedirectUri = api['user_credentials_redirect_uri'] %}
    {% set apiUserCredentialsScopes = api['user_credentials_scopes'] %}
{% else %}
    {% set apiId = '' %}
    {% set apiSetup = '' %}
    {% set apiName = '' %}
    {% set apiInUse = '0' %}
    {% set apiUsedBy = '' %}
    {% set apiDescription = '' %}
    {% set apiTenantId = '' %}
    {% set apiTenantType = '' %}
    {% set apiTenantAuthEventId = '' %}
    {% set apiTenantName = '' %}
    {% set apiUseSystemsCredentials = '1' %}
    {% set apiUserCredentialsClientId = '' %}
    {% set apiUserCredentialsClientSecret = '' %}
    {% set apiUserCredentialsRedirectUri = '' %}
    {% set apiUserCredentialsScopes = '' %}
{% endif %}
<form data-validateon="section" id="{{componentId}}-{{sectionId}}-form">
    <fieldset id="{{componentId}}-{{sectionId}}-fieldset">
        {% include 'api/types/common.html' %}
        <div class="row">
            <div class="col">
                {% if apiUseSystemsCredentials == 1 %}
                    {% set systemsCredentialsChecked = true %}
                {% else %}
                    {% set systemsCredentialsChecked = false %}
                {% endif %}
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'use_systems_credentials',
                        'fieldLabel'                     : 'Use Systems Credentials?',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Either you can use our (systems) credentials that are already registered with this system or you can grab new credentials from Xero developer program.',
                        'fieldRequired'                  : false,
                        'fieldType'                      : 'checkbox',
                        'fieldCheckboxType'              : 'primary',
                        'fieldCheckboxChecked'           : systemsCredentialsChecked,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldBazScan'                   : true
                    ]
                )}}
            </div>
            {% if wizard is not defined %}
                <div class="col">
                    {{adminltetags.useTag('fields',
                        [
                            'component'                      : component,
                            'componentName'                  : componentName,
                            'componentId'                    : componentId,
                            'sectionId'                      : sectionId,
                            'fieldId'                        : 'tenant_id',
                            'fieldLabel'                     : 'Tenant Id',
                            'fieldType'                      : 'input',
                            'fieldHelp'                      : true,
                            'fieldHelpTooltipContent'        : 'Tenant Id received from Xero dev program',
                            'fieldRequired'                  : true,
                            'fieldBazScan'                   : true,
                            'fieldBazPostOnCreate'           : true,
                            'fieldBazPostOnUpdate'           : true,
                            'fieldDataInputMinLength'        : 1,
                            'fieldDataInputMaxLength'        : 512,
                            'fieldDisabled'                  : true,
                            'fieldHidden'                    : true,
                            'fieldValue'                     : apiTenantId
                        ]
                    )}}
                    {{adminltetags.useTag('fields',
                        [
                            'component'                      : component,
                            'componentName'                  : componentName,
                            'componentId'                    : componentId,
                            'sectionId'                      : sectionId,
                            'fieldId'                        : 'tenant_type',
                            'fieldLabel'                     : 'Tenant type',
                            'fieldType'                      : 'input',
                            'fieldHelp'                      : true,
                            'fieldHelpTooltipContent'        : 'Tenant type received from Xero dev program',
                            'fieldRequired'                  : true,
                            'fieldBazScan'                   : true,
                            'fieldBazPostOnCreate'           : true,
                            'fieldBazPostOnUpdate'           : true,
                            'fieldDataInputMinLength'        : 1,
                            'fieldDataInputMaxLength'        : 512,
                            'fieldDisabled'                  : true,
                            'fieldHidden'                    : true,
                            'fieldValue'                     : apiTenantType
                        ]
                    )}}
                    {{adminltetags.useTag('fields',
                        [
                            'component'                      : component,
                            'componentName'                  : componentName,
                            'componentId'                    : componentId,
                            'sectionId'                      : sectionId,
                            'fieldId'                        : 'auth_event_id',
                            'fieldLabel'                     : 'Auth Event Id',
                            'fieldType'                      : 'input',
                            'fieldHelp'                      : true,
                            'fieldHelpTooltipContent'        : 'Auth Event Id received from Xero dev program',
                            'fieldRequired'                  : true,
                            'fieldBazScan'                   : true,
                            'fieldBazPostOnCreate'           : true,
                            'fieldBazPostOnUpdate'           : true,
                            'fieldDataInputMinLength'        : 1,
                            'fieldDataInputMaxLength'        : 512,
                            'fieldDisabled'                  : true,
                            'fieldHidden'                    : true,
                            'fieldValue'                     : apiTenantAuthEventId
                        ]
                    )}}
                    {{adminltetags.useTag('fields',
                        [
                            'component'                      : component,
                            'componentName'                  : componentName,
                            'componentId'                    : componentId,
                            'sectionId'                      : sectionId,
                            'fieldId'                        : 'tenant_name',
                            'fieldLabel'                     : 'Organisation',
                            'fieldType'                      : 'input',
                            'fieldHelp'                      : true,
                            'fieldHelpTooltipContent'        : 'Tenant name received from Xero dev program',
                            'fieldRequired'                  : true,
                            'fieldBazScan'                   : true,
                            'fieldBazPostOnCreate'           : true,
                            'fieldBazPostOnUpdate'           : true,
                            'fieldDataInputMinLength'        : 1,
                            'fieldDataInputMaxLength'        : 512,
                            'fieldDisabled'                  : true,
                            'fieldHidden'                    : false,
                            'fieldValue'                     : apiTenantName
                        ]
                    )}}
                </div>
                <div class="col">
                    {{adminltetags.useTag('fields',
                        [
                            'component'                      : component,
                            'componentName'                  : componentName,
                            'componentId'                    : componentId,
                            'sectionId'                      : sectionId,
                            'fieldId'                        : 'refresh_token',
                            'fieldLabel'                     : 'Refresh Token on update?',
                            'fieldHelp'                      : true,
                            'fieldHelpTooltipContent'        : 'If you are making any changes to api parameters, check this to run refresh token wizard',
                            'fieldRequired'                  : false,
                            'fieldType'                      : 'checkbox',
                            'fieldCheckboxType'              : 'info',
                            'fieldCheckboxChecked'           : false,
                            'fieldBazPostOnCreate'           : true,
                            'fieldBazPostOnUpdate'           : true,
                            'fieldBazScan'                   : true
                        ]
                    )}}
                </div>
            {% endif %}
        </div>
        <div class="row" id="{{componentId}}-{{sectionId}}-user-credentials">
            <div class="col">
                <div class="row">
                    <div class="col">
                        {{adminltetags.useTag('fields',
                            [
                                'component'                      : component,
                                'componentName'                  : componentName,
                                'componentId'                    : componentId,
                                'sectionId'                      : sectionId,
                                'fieldId'                        : 'user_credentials_client_id',
                                'fieldLabel'                     : 'Client Id',
                                'fieldType'                      : 'input',
                                'fieldHelp'                      : true,
                                'fieldHelpTooltipContent'        : 'Client Id received from Xero dev program',
                                'fieldRequired'                  : true,
                                'fieldBazScan'                   : true,
                                'fieldBazPostOnCreate'           : true,
                                'fieldBazPostOnUpdate'           : true,
                                'fieldDataInputMinLength'        : 1,
                                'fieldDataInputMaxLength'        : 512,
                                'fieldDisabled'                  : false,
                                'fieldValue'                     : apiUserCredentialsClientId
                            ]
                        )}}
                    </div>
                    <div class="col">
                        {{adminltetags.useTag('fields',
                            [
                                'component'                      : component,
                                'componentName'                  : componentName,
                                'componentId'                    : componentId,
                                'sectionId'                      : sectionId,
                                'fieldId'                        : 'user_credentials_client_secret',
                                'fieldLabel'                     : 'Client Secret',
                                'fieldType'                      : 'input',
                                'fieldHelp'                      : true,
                                'fieldHelpTooltipContent'        : 'Client Secret received from Xero dev program',
                                'fieldRequired'                  : true,
                                'fieldBazScan'                   : true,
                                'fieldBazPostOnCreate'           : true,
                                'fieldBazPostOnUpdate'           : true,
                                'fieldDataInputMinLength'        : 1,
                                'fieldDataInputMaxLength'        : 512,
                                'fieldDisabled'                  : false,
                                'fieldValue'                     : apiUserCredentialsClientSecret
                            ]
                        )}}
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        {{adminltetags.useTag('fields',
                            [
                                'component'                      : component,
                                'componentName'                  : componentName,
                                'componentId'                    : componentId,
                                'sectionId'                      : sectionId,
                                'fieldId'                        : 'user_credentials_redirect_uri',
                                'fieldLabel'                     : 'Redirect Uri',
                                'fieldType'                      : 'input',
                                'fieldHelp'                      : true,
                                'fieldHelpTooltipContent'        : 'Redirect Uri received from Xero dev program',
                                'fieldRequired'                  : true,
                                'fieldBazScan'                   : true,
                                'fieldBazPostOnCreate'           : true,
                                'fieldBazPostOnUpdate'           : true,
                                'fieldDataInputMinLength'        : 1,
                                'fieldDataInputMaxLength'        : 1024,
                                'fieldDisabled'                  : false,
                                'fieldValue'                     : apiUserCredentialsRedirectUri
                            ]
                        )}}
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="row">
                    <div class="col">
                        {{adminltetags.useTag('fields',
                            [
                                'component'                      : component,
                                'componentName'                  : componentName,
                                'componentId'                    : componentId,
                                'sectionId'                      : sectionId,
                                'fieldId'                        : 'user_credentials_scopes',
                                'fieldLabel'                     : 'Scopes (comma separated)',
                                'fieldType'                      : 'textarea',
                                'fieldDataMaxLength'             : 2048,
                                'fieldHelp'                      : true,
                                'fieldHelpTooltipContent'        : 'Scopes received from Xero dev program. NOTE: Enter each scope comma separated',
                                'fieldRequired'                  : false,
                                'fieldBazScan'                   : true,
                                'fieldRequired'                  : true,
                                'fieldBazPostOnCreate'           : true,
                                'fieldBazPostOnUpdate'           : true,
                                'fieldDataInputMaxLength'        : 2048,
                                'fieldTextareaRows'              : 4,
                                'fieldValue'                     : apiUserCredentialsScopes
                            ]
                        )}}
                    </div>
                </div>
            </div>
        </div>
    </fieldset>
</form>
<form data-validateon="section" id="{{componentId}}-{{sectionId}}-form">
    <fieldset id="{{componentId}}-{{sectionId}}-fieldset">
        <div class="row">
            <div class="col">
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'tenant_id',
                        'fieldLabel'                     : 'Organisation',
                        'fieldType'                      : 'select2',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Select Xero organisation.',
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldRequired'                  : true,
                        'fieldDataSelect2Options'        : [],
                        'fieldDataSelect2OptionsKey'     : 'id',
                        'fieldDataSelect2OptionsValue'   : 'name',
                        'fieldDataSelect2OptionsArray'   : true,
                        'fieldDataSelect2OptionsSelected': ''
                    ]
                )}}
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'tenant_type',
                        'fieldLabel'                     : 'Tenant type',
                        'fieldType'                      : 'input',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Tenant type received from Xero dev program',
                        'fieldRequired'                  : true,
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldDataInputMinLength'        : 1,
                        'fieldDataInputMaxLength'        : 512,
                        'fieldDisabled'                  : true,
                        'fieldHidden'                    : true,
                        'fieldValue'                     : ''
                    ]
                )}}
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'auth_event_id',
                        'fieldLabel'                     : 'Auth Event Id',
                        'fieldType'                      : 'input',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Auth Event Id received from Xero dev program',
                        'fieldRequired'                  : true,
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldDataInputMinLength'        : 1,
                        'fieldDataInputMaxLength'        : 512,
                        'fieldDisabled'                  : true,
                        'fieldHidden'                    : true,
                        'fieldValue'                     : ''
                    ]
                )}}
                {{adminltetags.useTag('fields',
                    [
                        'component'                      : component,
                        'componentName'                  : componentName,
                        'componentId'                    : componentId,
                        'sectionId'                      : sectionId,
                        'fieldId'                        : 'tenant_name',
                        'fieldLabel'                     : 'Organisation',
                        'fieldType'                      : 'input',
                        'fieldHelp'                      : true,
                        'fieldHelpTooltipContent'        : 'Tenant name received from Xero dev program',
                        'fieldRequired'                  : true,
                        'fieldBazScan'                   : true,
                        'fieldBazPostOnCreate'           : true,
                        'fieldBazPostOnUpdate'           : true,
                        'fieldDataInputMinLength'        : 1,
                        'fieldDataInputMaxLength'        : 512,
                        'fieldDisabled'                  : true,
                        'fieldHidden'                    : true,
                        'fieldValue'                     : ''
                    ]
                )}}
            </div>
        </div>
    </fieldset>
</form>